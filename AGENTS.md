# AGENTS.md

Этот файл документирует поведение и настройки агентов в проекте SmoothTask.

## Языковые настройки

### Основной язык

- **Русский язык** используется для:
  - Внутренних комментариев в коде
  - Документации на русском языке
  - Сообщений об ошибках и логов
  - Взаимодействия с пользователем

### Английский язык

- **Английский язык** используется для:
  - Имен функций, переменных и типов
  - API и интерфейсов
  - Международной документации
  - Взаимодействия с внешними системами

## Поведение агента

### Размышления и планирование

Агент должен:
1. **Анализировать задачи** на русском языке
2. **Планировать действия** с учетом контекста проекта
3. **Документировать решения** в PLAN.md и других файлах
4. **Создавать тесты** для нового кода
5. **Проверять изменения** перед коммитом

### Взаимодействие с кодом

Агент должен:
1. **Читать существующий код** перед внесением изменений
2. **Следовать архитектуре** проекта
3. **Использовать согласованный стиль** кодирования
4. **Писать тесты** для нового функционала
5. **Обновлять документацию** при изменениях

### Обработка ошибок

Агент должен:
1. **Проверять тесты** перед коммитом
2. **Исправлять ошибки** при их обнаружении
3. **Документировать проблемы** в PLAN.md
4. **Создавать блокеры** при необходимости
5. **Обновлять статус задач** при изменениях

## Примеры поведения

### Пример 1: Анализ задачи

```markdown
# Анализ задачи ST-357

Требуется улучшить обработку ошибок в метриках. 

**Текущее состояние:**
- Системные метрики уже имеют хорошие сообщения об ошибках
- Метрики процессов нуждаются в улучшении
- Аудио метрики требуют дополнительного контекста

**План действий:**
1. Улучшить сообщения об ошибках в system.rs
2. Добавить контекст в process.rs
3. Улучшить сообщения в audio_pipewire.rs
4. Проверить все тесты
```

### Пример 2: Взаимодействие с кодом

```rust
// Хороший пример: использование русского языка в комментариях
/// Собрать метрики всех процессов из /proc.
///
/// Возвращает вектор ProcessRecord для всех доступных процессов.
/// Процессы, к которым нет доступа или которые завершились, пропускаются.
pub fn collect_process_metrics() -> Result<Vec<ProcessRecord>> {
    // Реализация на английском языке
    let all_procs = procfs::process::all_processes()
        .context("Не удалось получить список процессов из /proc")?;
    
    // ... остальной код
}
```

### Пример 3: Документирование решений

```markdown
## 3. Недавно сделано (Recently Done)

- [x] ST-357: Улучшить обработку ошибок в метриках
  - Тип: Rust / core / metrics
  - Примечания: Улучшены сообщения об ошибках в system.rs, process.rs и audio_pipewire.rs.
  - Результаты: Все тесты проходят, ошибки более информативны.
```

## Правила взаимодействия

1. **Всегда используй русский язык** для внутренних комментариев и документации
2. **Следуй архитектуре проекта** при внесении изменений
3. **Пиши тесты** для нового кода
4. **Обновляй документацию** при изменениях
5. **Проверяй тесты** перед коммитом

## Исключения

Использование английского языка допустимо в следующих случаях:
- Имена функций, переменных и типов
- API и интерфейсы
- Международная документация
- Взаимодействие с внешними системами

## Заключение

Этот файл описывает поведение агента и его взаимодействие с проектом SmoothTask. Агент должен следовать этим правилам для обеспечения согласованности и качества кода.