# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-478: Реализовать обучение CatBoost Ranker'а на teacher-политике
  - Тип: Python / trainer / ml
  - Критерии готовности:
    - ✅ Реализовать функцию train_ranker с использованием CatBoost
    - ✅ Поддержать загрузку данных из SQLite снапшотов
    - ✅ Добавить валидацию входных данных и обработку ошибок
    - ✅ Написать unit и интеграционные тесты
    - ✅ Добавить документацию
  - Примечания: Основная функциональность для CatBoost v1
  - Приоритет: Высокий
  - Статус: COMPLETED

- [x] ST-479: Добавить интеграцию ONNX Runtime для инференса
  - Тип: Rust / core / model
  - Критерии готовности:
    - ✅ Добавить зависимость onnxruntime и соответствующие bindings
    - ✅ Реализовать ONNX-ранкер для инференса
    - ✅ Поддержать загрузку ONNX моделей
    - ✅ Написать unit и интеграционные тесты
    - ✅ Добавить обработку ошибок и логирование
  - Примечания: Необходимо для CatBoost v1 инференса
  - Приоритет: Средний
  - Статус: COMPLETED

- [x] ST-480: Реализовать ONNX/JSON инференс в режиме dry-run
  - Тип: Rust / core / policy
  - Критерии готовности:
    - ✅ Интегрировать ONNX-ранкер в Policy Engine
    - ✅ Добавить режим dry-run для тестирования без применения приоритетов
    - ✅ Поддержать JSON-конфигурацию для ранкера
    - ✅ Написать интеграционные тесты
    - ✅ Добавить документацию
  - Примечания: Завершение CatBoost v1 функциональности
  - Приоритет: Средний
  - Статус: COMPLETED

## 2. Бэклог

- [ ] ST-478: Реализовать обучение CatBoost Ranker'а на teacher-политике
  - Тип: Python / trainer / ml
  - Критерии готовности:
    - Реализовать функцию train_ranker с использованием CatBoost
    - Поддержать загрузку данных из SQLite снапшотов
    - Добавить валидацию входных данных и обработку ошибок
    - Написать unit и интеграционные тесты
    - Добавить документацию
  - Примечания: Основная функциональность для CatBoost v1
  - Приоритет: Высокий

- [ ] ST-479: Добавить интеграцию ONNX Runtime для инференса
  - Тип: Rust / core / model
  - Критерии готовности:
    - Добавить зависимость onnxruntime и соответствующие bindings
    - Реализовать ONNX-ранкер для инференса
    - Поддержать загрузку ONNX моделей
    - Написать unit и интеграционные тесты
    - Добавить обработку ошибок и логирование
  - Примечания: Необходимо для CatBoost v1 инференса
  - Приоритет: Средний

- [ ] ST-480: Реализовать ONNX/JSON инференс в режиме dry-run
  - Тип: Rust / core / policy
  - Критерии готовности:
    - Интегрировать ONNX-ранкер в Policy Engine
    - Добавить режим dry-run для тестирования без применения приоритетов
    - Поддержать JSON-конфигурацию для ранкера
    - Написать интеграционные тесты
    - Добавить документацию
  - Примечания: Завершение CatBoost v1 функциональности
  - Приоритет: Средний

- [x] ST-477: Добавить поддержку мониторинга сетевых метрик
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - ✅ Реализовать сбор сетевых метрик (трафик, ошибки)
    - ✅ Добавить интеграцию с существующей системой метрик
    - ✅ Написать unit и интеграционные тесты
    - ✅ Добавить документацию
  - Примечания: Расширение функциональности мониторинга
  - Приоритет: Низкий
  - Статус: COMPLETED

## 3. Недавно сделано (Recently Done)

- [x] ST-478: Реализовать обучение CatBoost Ranker'а на teacher-политике
  - Тип: Python / trainer / ml
  - Примечания: Реализована функция train_ranker с использованием CatBoost для обучения на данных из SQLite снапшотов. Добавлена валидация входных данных, обработка ошибок и логирование. Поддержана загрузка данных с фильтрацией и подготовкой фич. Добавлены comprehensive unit и интеграционные тесты. Функция поддерживает сохранение обученной модели в ONNX формат для использования в Rust-коде.
  - Статус: COMPLETED

- [x] ST-479: Добавить интеграцию ONNX Runtime для инференса
  - Тип: Rust / core / model
  - Примечания: Добавлена зависимость onnxruntime (ort) и реализован ONNX-ранкер для инференса. Реализована загрузка ONNX моделей, выполнение инференса и обработка результатов. Добавлены comprehensive unit тесты для всех функций. Улучшена обработка ошибок и логирование для всех этапов инференса. Реализовано преобразование фич в тензоры и обработка категориальных данных.
  - Статус: COMPLETED

- [x] ST-480: Реализовать ONNX/JSON инференс в режиме dry-run
  - Тип: Rust / core / policy
  - Примечания: Интегрирован ONNX-ранкер в Policy Engine с поддержкой режима dry-run. Добавлена JSON-конфигурация для ранкера и обработка результатов инференса. Реализован режим dry-run для тестирования без применения приоритетов. Добавлены интеграционные тесты и обновлена документация. Policy Engine поддерживает hybrid режим с использованием ONNX-ранкера для ранжирования групп приложений.
  - Статус: COMPLETED

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.