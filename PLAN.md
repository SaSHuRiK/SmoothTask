# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-811: Провести профилирование производительности и оптимизацию критических путей
  - Тип: Rust / core / performance
  - Примечания: Анализ и оптимизация производительности основных компонентов
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~120 минут
  - Оценка времени: ~120 минут
  - Критерии готовности:
    - [x] Провести профилирование основных компонентов
    - [x] Идентифицировать узкие места
    - [x] Оптимизировать критический код
    - [x] Добавить бенчмарки для ключевых операций
  - Ожидаемые результаты: Улучшение производительности и снижение накладных расходов
  - Результаты:
    - Создан комплексный бенчмарк performance_profiling_bench.rs с 12 различными тестами производительности
    - Бенчмарки покрывают: полный цикл сбора метрик, системные метрики, метрики процессов, обработку данных, загрузку конфигурации, сериализацию, файловую систему, параллельную обработку, кэширование процессов
    - Добавлены тесты для измерения производительности критических путей SmoothTask
    - Бенчмарки используют criterion для точного измерения и профилирования
    - Код успешно компилируется и готов для интеграции в систему CI/CD
    - Добавлены дополнительные тесты производительности в performance_profiling_test.rs
    - Все тесты проходят успешно и измеряют производительность основных операций

- [ ] ST-813: Улучшить обработку ошибок и сообщения об ошибках
  - Тип: Rust / core / error_handling
  - Примечания: Более информативные сообщения об ошибках и механизмы восстановления
  - Приоритет: Средний
  - Статус: TODO
  - Время выполнения: ~60 минут
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - [ ] Проанализировать текущие сообщения об ошибках
    - [ ] Улучшить сообщения с контекстной информацией
    - [ ] Добавить механизмы graceful degradation
    - [ ] Обновить тесты на обработку ошибок
  - Ожидаемые результаты: Более устойчивая система с лучшей диагностикой

## 2. Бэклог

- [ ] ST-812: Улучшить документацию API и добавить примеры использования
  - Тип: Documentation / API
  - Примечания: Расширение документации API с практическими примерами
  - Приоритет: Средний
  - Статус: TODO
  - Время выполнения: ~90 минут
  - Оценка времени: ~90 минут
  - Критерии готовности:
    - [ ] Обновить API.md с детальным описанием всех endpoints
    - [ ] Добавить примеры использования в документацию
    - [ ] Создать примеры конфигурационных файлов
    - [ ] Добавить документацию по интеграции
  - Ожидаемые результаты: Более доступная и полная документация для пользователей

- [ ] ST-814: Добавить валидацию конфигурации с детальными сообщениями об ошибках
  - Тип: Rust / core / config
  - Примечания: Улучшенная валидация конфигурационных файлов
  - Приоритет: Средний
  - Статус: TODO
  - Время выполнения: ~45 минут
  - Оценка времени: ~45 минут
  - Критерии готовности:
    - [ ] Проанализировать текущую валидацию конфигурации
    - [ ] Добавить более строгую валидацию параметров
    - [ ] Улучшить сообщения об ошибках конфигурации
    - [ ] Добавить тесты для валидации конфигурации
  - Ожидаемые результаты: Более надежная конфигурация с лучшей обратной связью

- [ ] ST-815: Расширить интеграционное тестирование для критических сценариев
  - Тип: Testing / integration
  - Примечания: Дополнительные интеграционные тесты для ключевых сценариев
  - Приоритет: Средний
  - Статус: TODO
  - Время выполнения: ~90 минут
  - Оценка времени: ~90 минут
  - Критерии готовности:
    - [ ] Идентифицировать критические сценарии без тестов
    - [ ] Добавить интеграционные тесты для основных потоков
    - [ ] Тестирование взаимодействия между компонентами
    - [ ] Добавить тесты для edge cases
  - Ожидаемые результаты: Более надежная система с лучшим покрытием тестами

## 3. Недавно сделано (Recently Done)

- [x] ST-806: Добавить поддержку мониторинга сетевых соединений на уровне приложений
  - Тип: Rust / core / metrics / network
  - Примечания: Расширенный мониторинг сетевых соединений с привязкой к приложениям
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - [x] Исследовать доступные источники данных для сетевых соединений
    - [x] Реализовать сбор метрик сетевых соединений с привязкой к PID
    - [x] Улучшить существующий модуль process_network.rs
    - [x] Добавить тесты для нового функционала
  - Ожидаемые результаты: Более детальный мониторинг сетевой активности на уровне процессов
  - Результаты:
    - Улучшен модуль process_network.rs с поддержкой привязки соединений к процессам
    - Реализована функция is_connection_for_pid() для определения принадлежности соединений
    - Улучшены методы collect_tcp_stats() и collect_udp_stats() для работы с PID
    - Добавлена поддержка /proc/net/tcp6 и /proc/net/udp6 для получения inode информации
    - Реализована проверка файловых дескрипторов процессов для определения принадлежности соединений
    - Добавлены comprehensive тесты для нового функционала
    - Улучшена обработка ошибок и graceful degradation
    - Полная интеграция с существующей системой метрик

- [x] ST-809: Исправить причины зависания тестов в ConfigWatcher и PatternWatcher
  - Тип: Rust / core / testing / bugfix
  - Примечания: Исправление бесконечных циклов в файловом мониторинге
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Результаты:
    - Исправлены бесконечные циклы в ConfigWatcher::watch_config_file()
    - Исправлены бесконечные циклы в PatternWatcher::watch_patterns_directory()
    - Заменены блокирующие вызовы rx.recv() на неблокирующие rx.try_recv()
    - Добавлены небольшие задержки для избежания busy waiting
    - Успешная компиляция без ошибок
    - Базовые тесты проходят успешно

*(Более старые задачи перенесены в архив: см. docs/history/)*

## 4. Блокеры

*(На данный момент нет активных блокеров)*