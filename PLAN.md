# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [ ] ST-696: Реализовать версионирование моделей
  - Тип: ML / Infrastructure
  - Примечания: Добавить поддержку нескольких версий моделей с возможностью отката
  - Приоритет: Низкий
  - Ожидаемые результаты: Инфраструктура для управления версиями моделей

- [ ] ST-697: Улучшить обработку edge cases в данных
  - Тип: Data Quality / ML
  - Примечания: Добавить обработку редких и аномальных случаев в данных
  - Приоритет: Средний
  - Ожидаемые результаты: Более robust обработка данных для обучения

- [ ] ST-698: Добавить экспорт метрик производительности в Prometheus
  - Тип: Monitoring / Integration
  - Примечания: Реализовать экспорт MLPerformanceMetrics в Prometheus для мониторинга
  - Приоритет: Средний
  - Ожидаемые результаты: Интеграция с системой мониторинга для отслеживания ML производительности


## 2. Бэклог

- [x] ST-693: Добавить комплексную документацию для новых функций
  - Тип: Documentation
  - Примечания: Обновление документации для новых функций, API и изменений в коде
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Критерии готовности:
    - [x] Обновить ML_CLASSIFICATION.md с описанием новых функций обучения
    - [x] Добавить примеры использования TrainingPipeline и интеграции модели
    - [x] Обновить ONNX_INTEGRATION.md с новым пайплайном обучения
    - [x] Добавить лучшие практики и устранение неполадок
    - [x] Проверить актуальность всех документов
  - Изменённые файлы:
    - docs/ML_CLASSIFICATION.md: Добавлена документация по TrainingPipeline, примерам использования, лучшим практикам
    - docs/ONNX_INTEGRATION.md: Обновлена документация по новому пайплайну обучения и интеграции
  - Результаты: Полная и актуальная документация по ML workflow с примерами и руководствами

- [x] ST-694: Улучшить обработку ошибок в критических модулях
  - Тип: Code Quality / Error Handling
  - Примечания: Добавление более детальных сообщений об ошибках и улучшение graceful degradation
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~90 минут
  - Критерии готовности:
    - [x] Проверить критические модули на качество обработки ошибок
    - [x] Добавить более информативные сообщения об ошибках с контекстом
    - [x] Улучшить graceful degradation с детальным логированием
    - [x] Добавить проверки прав доступа и валидацию данных
    - [x] Улучшить логирование для отладки и мониторинга
  - Изменённые файлы:
    - smoothtask-core/src/model/onnx_ranker.rs: Улучшена обработка ошибок загрузки модели, добавлены проверки прав доступа, улучшено логирование
    - smoothtask-core/src/model/ranker.rs: Добавлено детальное логирование в StubRanker для отладки
    - smoothtask-core/src/policy/engine.rs: Улучшена обработка ошибок загрузки модели, добавлены информативные сообщения для пользователя
  - Результаты: Значительно улучшено качество обработки ошибок, добавлены контекстные сообщения, улучшено graceful degradation и логирование

- [x] ST-667: Обновить документацию по ML и обучению моделей
  - Тип: Documentation / ML
  - Примечания: Создание комплексного руководства по сбору данных и обучению моделей
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Критерии готовности:
    - ✅ Создание руководства по сбору данных
    - ✅ Создание руководства по обучению моделей
    - ✅ Добавление примеров использования
    - ✅ Обновление существующей документации
    - ✅ Добавление диаграмм и визуализаций
  - Изменённые файлы:
    - docs/ML_CLASSIFICATION.md: Обновление документации по ML
    - docs/CATBOOST_V1_GUIDE.md: Добавление руководства по CatBoost
    - docs/ONNX_INTEGRATION.md: Обновление документации по ONNX
    - smoothtask-trainer/README.md: Обновление примеров
  - Результаты: Полная и актуальная документация по ML workflow с примерами и руководствами

## 3. Недавно сделано (Recently Done)

- [x] ST-695: Добавить мониторинг производительности ML модели
  - Тип: Monitoring / ML
  - Примечания: Реализовать метрики для отслеживания качества и производительности ML модели
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Ожидаемые результаты: Система мониторинга точности и задержек ML ранжирования
  - Критерии готовности:
    - [x] Добавить структуру MLPerformanceMetrics для отслеживания метрик
    - [x] Реализовать сбор метрик в MLClassifier
    - [x] Добавить логирование и экспорт метрик
    - [x] Обновить документацию
  - Изменённые файлы:
    - smoothtask-core/src/classify/ml_classifier.rs: Добавлена структура MLPerformanceMetrics, обновлены трейты и реализации для сбора метрик производительности
  - Результаты: Полная система мониторинга ML производительности с метриками времени, уверенности, успешности и категоризации классификаций

- [x] ST-694: Улучшить обработку ошибок в критических модулях
  - Тип: Code Quality / Error Handling
  - Примечания: Добавление более детальных сообщений об ошибках и улучшение graceful degradation
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~90 минут
  - Результаты: Значительно улучшено качество обработки ошибок, добавлены контекстные сообщения, улучшено graceful degradation и логирование

- [x] ST-693: Добавить комплексную документацию для новых функций
  - Тип: Documentation
  - Примечания: Обновление документации для новых функций, API и изменений в коде
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Результаты: Полная и актуальная документация по ML workflow с примерами и руководствами

- [x] ST-692: Интегрировать обученную модель в конфигурацию
  - Тип: Integration / Configuration
  - Примечания: Обновить конфигурацию для использования обученной модели
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~15 минут
  - Результаты: Обновлена конфигурация и создана документация для использования ML модели

- [x] ST-691: Обучить модель на реальных данных
  - Тип: ML / Training
  - Примечания: Обучить CatBoostRanker модель на собранных данных
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Результаты: Обученная модель CatBoostRanker с параметрами YetiRank, depth=6, learning_rate=0.1, iterations=500

- [x] ST-690: Собрать данные в текущей сессии для обучения модели
  - Тип: Data Collection / ML
  - Примечания: Собрать текущие снапшоты системы для создания тренировочного датасета
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Результаты: Создан датасет training_data.sqlite с 15 снапшотами, 150 процессами и 60 группами

*(Более старые выполненные задачи перенесены в архив: docs/history/PLAN_DONE_archive.md)*

См. архив: docs/history/PLAN_DONE_archive.md

*(Более старые выполненные задачи перенесены в архив: docs/history/PLAN_DONE_archive.md)*

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.
