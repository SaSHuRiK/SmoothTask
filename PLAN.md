# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-626: Улучшить обработку ошибок в модуле метрик аудио
  - Тип: Rust / core / metrics
  - Примечания: Добавление более детальных сообщений об ошибках и улучшение graceful degradation для аудио метрик
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Критерии готовности:
    - ✅ Улучшенные сообщения об ошибках с практическими рекомендациями
    - ✅ Graceful degradation при недоступности аудио компонентов
    - ✅ Подсчет и логирование ошибок для диагностики
    - ✅ Частичное восстановление при ошибках в отдельных устройствах
  - Результаты: Полная реализация улучшенной обработки ошибок с детальными сообщениями и улучшенной диагностикой для аудио метрик

- [x] ST-627: Оптимизировать производительность сбора метрик аудио
  - Тип: Rust / core / metrics / performance
  - Примечания: Улучшение производительности сбора метрик аудио через кэширование и параллельную обработку
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Критерии готовности:
    - ✅ Кэширование аудио метрик для уменьшения нагрузки
    - ✅ Конфигурируемый параллелизм для сбора аудио данных
    - ✅ Бенчмарки для измерения производительности
    - ✅ Комплексные тесты для нового функционала
  - Результаты: Полная реализация оптимизации производительности сбора аудио метрик с поддержкой кэширования и параллельной обработки

- [ ] ST-625: Добавить поддержку мониторинга использования GPU на уровне процессов
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Реализация детализированного мониторинга использования GPU процессами с использованием eBPF
  - Приоритет: Высокий
  - Статус: TODO
  - Оценка времени: ~90 минут
  - Критерии готовности:
    - eBPF программа для мониторинга использования GPU процессами
    - Интеграция с существующими метриками процессов
    - Новый API endpoint /api/processes/gpu с обработчиком process_gpu_handler
    - Комплексные тесты для нового функционала
    - Документация API с примерами использования

## 2. Бэклог

- [ ] ST-628: Добавить поддержку мониторинга использования сети на уровне процессов
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Реализация детализированного мониторинга сетевого трафика процессами с использованием eBPF
  - Приоритет: Средний
  - Статус: TODO
  - Оценка времени: ~90 минут
  - Критерии готовности:
    - eBPF программа для мониторинга сетевого трафика процессов
    - Интеграция с существующими метриками процессов
    - Новый API endpoint /api/processes/network с обработчиком process_network_handler
    - Комплексные тесты для нового функционала

- [ ] ST-629: Улучшить обработку ошибок в модуле метрик ввода
  - Тип: Rust / core / metrics
  - Примечания: Добавление более детальных сообщений об ошибках и улучшение graceful degradation для метрик ввода
  - Приоритет: Низкий
  - Статус: TODO
  - Оценка времени: ~30 минут
  - Критерии готовности:
    - Улучшенные сообщения об ошибках с практическими рекомендациями
    - Graceful degradation при недоступности устройств ввода
    - Подсчет и логирование ошибок для диагностики

## 3. Недавно сделано (Recently Done)



- [x] ST-626: Улучшить обработку ошибок в модуле метрик аудио
  - Тип: Rust / core / metrics
  - Примечания: Добавление более детальных сообщений об ошибках и улучшение graceful degradation для аудио метрик
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Критерии готовности:
    - ✅ Улучшенные сообщения об ошибках с практическими рекомендациями
    - ✅ Graceful degradation при недоступности аудио компонентов
    - ✅ Подсчет и логирование ошибок для диагностики
    - ✅ Частичное восстановление при ошибках в отдельных устройствах
  - Результаты: Полная реализация улучшенной обработки ошибок с детальными сообщениями и улучшенной диагностикой для аудио метрик

- [x] ST-627: Оптимизировать производительность сбора метрик аудио
  - Тип: Rust / core / metrics / performance
  - Примечания: Улучшение производительности сбора метрик аудио через кэширование и параллельную обработку
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Критерии готовности:
    - ✅ Кэширование аудио метрик для уменьшения нагрузки
    - ✅ Конфигурируемый параллелизм для сбора аудио данных
    - ✅ Бенчмарки для измерения производительности
    - ✅ Комплексные тесты для нового функционала
  - Результаты: Полная реализация оптимизации производительности сбора аудио метрик с поддержкой кэширования и параллельной обработки

- [x] ST-619: Добавить поддержку мониторинга энергопотребления процессов
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Реализация мониторинга энергопотребления на уровне процессов с использованием eBPF
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~90 минут
  - Критерии готовности:
    - ✅ eBPF программа для мониторинга энергопотребления процессов (process_energy.c)
    - ✅ Интеграция с метриками в ebpf.rs (ProcessEnergyStat, конфигурация, сбор данных)
    - ✅ Новый API endpoint /api/processes/energy с обработчиком process_energy_handler
    - ✅ Комплексные тесты для нового функционала (тесты eBPF и API)
    - ✅ Документация API с примерами использования
  - Изменённые файлы:
    - smoothtask-core/src/ebpf_programs/process_energy.c: Новая eBPF программа для мониторинга энергопотребления процессов
    - smoothtask-core/src/metrics/ebpf.rs: Добавлена поддержка мониторинга энергопотребления процессов
    - smoothtask-core/src/api/server.rs: Добавлен обработчик process_energy_handler и маршрут /api/processes/energy
    - smoothtask-core/src/metrics/ebpf.rs: Добавлены комплексные тесты для функционала
    - smoothtask-core/src/api/server.rs: Добавлены тесты для API endpoint
  - Результаты: Полная реализация мониторинга энергопотребления процессов через eBPF с поддержкой детализированной статистики по каждому процессу, API endpoint для мониторинга и комплексными тестами

*(Более старые выполненные задачи перенесены в архив: docs/history/PLAN_DONE_archive.md)*

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.
