# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-459: Улучшение WaylandIntrospector для полной поддержки композиторов
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Протестировать с различными Wayland композиторами (KWin, Mutter, Sway, Hyprland)
    - Добавить обработку дополнительных протоколов при необходимости
    - Улучшить обработку ошибок и логирование
    - Написать интеграционные тесты для различных сценариев
  - Примечания: Улучшение стабильности и совместимости
  - Приоритет: Высокий
  - Подзадачи:
    - [x] ST-459-1: Добавить поддержку различных Wayland протоколов (KWin, Mutter, Sway, Hyprland)
    - [x] ST-459-2: Улучшить обработку ошибок и логирование в WaylandIntrospector
    - [x] ST-459-3: Добавить интеграционные тесты для различных сценариев

- [x] ST-476: Улучшить обработку ошибок в модуле классификации
  - Тип: Rust / core / classify
  - Критерии готовности:
    - ✅ Добавить более детальные сообщения об ошибках
    - ✅ Улучшить обработку edge cases
    - ✅ Добавить логирование ошибок с контекстом
    - ✅ Написать дополнительные тесты
  - Примечания: Улучшение стабильности и отладки
  - Приоритет: Высокий
  - Статус: COMPLETED

- [x] ST-475: Добавить поддержку мониторинга GPU метрик
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - ✅ Реализовать сбор метрик GPU (загрузка, память, температура)
    - ✅ Поддержать различные GPU (NVIDIA, AMD, Intel)
    - ✅ Добавить интеграцию с существующей системой метрик
    - ✅ Написать unit и интеграционные тесты
  - Примечания: Расширение функциональности мониторинга
  - Приоритет: Средний
  - Статус: COMPLETED

## 2. Бэклог

- [ ] ST-477: Добавить поддержку мониторинга сетевых метрик
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Реализовать сбор сетевых метрик (трафик, ошибки, задержки)
    - Добавить интеграцию с существующей системой метрик
    - Написать unit и интеграционные тесты
  - Примечания: Расширение функциональности мониторинга
  - Приоритет: Низкий

## 3. Недавно сделано (Recently Done)

- [x] ST-459: Улучшение WaylandIntrospector для полной поддержки композиторов
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Добавлена поддержка различных Wayland композиторов (KWin, Mutter, Sway, Hyprland)
    - Реализовано обнаружение типа композитора через переменные окружения и процессы
    - Улучшена обработка ошибок и логирование
    - Добавлены интеграционные тесты для различных сценариев
  - Примечания: Улучшение стабильности и совместимости с различными Wayland окружениями
  - Приоритет: Высокий
  - Статус: COMPLETED

- [x] ST-476: Улучшить обработку ошибок в модуле классификации
  - Тип: Rust / core / classify
  - Примечания: Добавлены более детальные сообщения об ошибках, улучшена обработка edge cases, добавлено логирование ошибок с контекстом. Реализована валидация паттернов с проверкой категорий, имен приложений и правил сопоставления. Улучшена обработка ошибок при загрузке паттернов и классификации процессов. Добавлены дополнительные тесты для проверки обработки ошибок.
  - Статус: COMPLETED

- [x] ST-475: Добавить поддержку мониторинга GPU метрик
  - Тип: Rust / core / metrics
  - Примечания: Реализован сбор метрик GPU (загрузка, память, температура, мощность, тактовые частоты) с поддержкой различных GPU (NVIDIA, AMD, Intel). Улучшена обработка ошибок и добавлено логирование для всех этапов сбора метрик. Добавлены специализированные функции для чтения метрик с разных типов GPU. Реализована интеграция с существующей системой метрик. Добавлены comprehensive тесты для проверки функциональности.
  - Статус: COMPLETED

- [x] ST-474: Оптимизация производительности API сервера
  - Тип: Rust / core / api
  - Примечания: Реализована система кэширования для часто запрашиваемых данных (процессы, группы приложений). Добавлены метрики производительности API с отслеживанием количества запросов, кэш-хитов, времени обработки. Создан новый endpoint /api/performance для мониторинга производительности. Улучшена обработка JSON-сериализации с добавлением информации о кэше.

- [x] ST-473: Добавить поддержку JSON Schema для API конфигурации
  - Тип: Documentation / API
  - Примечания: Сгенерировать JSON Schema для конфигурационного файла, добавить примеры валидации конфигурации, интегрировать схему в API документацию
  - Статус: COMPLETED

- [x] ST-472: Улучшить обработку ошибок в API сервере
  - Тип: Rust / core / api
  - Примечания: Улучшена валидация входных параметров для endpoint'ов /api/processes/:pid и /api/appgroups/:id. Добавлены проверки на допустимые диапазоны PID, длину и формат ID групп приложений. Улучшены сообщения об ошибках с добавлением детальной информации (поле, значение, ограничения, предложения). Улучшено логирование ошибок с контекстом. Добавлены дополнительные тесты для новых сценариев обработки ошибок.

- [x] ST-471: Исправить тест config watcher в run_daemon_test.rs
  - Тип: Rust / core / tests
  - Примечания: Исправлена ошибка с отсутствующим конфигурационным файлом для ConfigWatcher. Добавлено создание временного конфигурационного файла, исправлены проблемы с импортами и владением. Использован конкретный порт 18080 вместо порта 0 для совместимости с axum. Тест теперь компилируется и готов к выполнению.

См. архив: docs/history/PLAN_DONE_archive.md

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.