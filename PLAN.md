# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-557: Исследовать и исправить ошибки в тестах перезагрузки паттернов
  - Тип: Rust / core / classify / testing
  - Критерии готовности:
    - [x] Проанализировать причину сбоев в test_pattern_database_reload
    - [x] Исправить логику подсчета новых файлов паттернов
    - [x] Обновить тесты для соответствия текущему поведению
    - [x] Убедиться, что все тесты классификации проходят
  - Примечания: Исправлена логика подсчета новых/измененных паттернов в PatternDatabase::reload()
  - Приоритет: Высокий
  - Оценка времени: ~60 минут
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Изменённые файлы:
    - smoothtask-core/src/classify/rules.rs: Исправлена логика подсчета новых и измененных паттернов
  - Результаты: Все тесты классификации теперь проходят успешно

- [ ] ST-515: Провести тестирование eBPF на реальных системах
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [ ] Провести тестирование на различных конфигурациях ядра
    - [ ] Проверить совместимость с различными дистрибутивами Linux
    - [ ] Собрать метрики производительности и стабильности
    - [ ] Документировать результаты и ограничения
  - Примечания: Тестирование eBPF функциональности на реальных системах для обеспечения стабильности
  - Приоритет: Низкий
  - Оценка времени: ~90 минут

- [ ] ST-490: Реализовать расширенную систему уведомлений
  - Тип: Rust / core / notifications
  - Критерии готовности:
    - [ ] Исследовать возможности уведомлений через D-Bus
    - [ ] Добавить поддержку уведомлений о изменениях приоритетов
    - [ ] Интегрировать с системой логирования
  - Примечания: Улучшение пользовательского опыта
  - Приоритет: Низкий

## 3. Недавно сделано (Recently Done)

- [x] ST-557: Исправить ошибки в тестах перезагрузки паттернов
  - Тип: Rust / core / classify / testing
  - Примечания: Исправлена логика подсчета новых/измененных паттернов в PatternDatabase::reload()
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Изменённые файлы:
    - smoothtask-core/src/classify/rules.rs: Исправлена логика подсчета новых и измененных паттернов
  - Результаты: Все тесты классификации теперь проходят успешно

- [x] ST-556: Комплексная оптимизация и улучшения системы
  - Тип: Rust / core / metrics / eBPF / API / system
  - Примечания: Комплексные улучшения eBPF, API, системных метрик и общего качества кода
  - Статус: COMPLETED
  - Время выполнения: ~180 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Оптимизация eBPF с улучшенным кэшированием
    - smoothtask-core/src/api/server.rs: Улучшения API сервера
    - smoothtask-core/src/metrics/system.rs: Оптимизация системных метрик
    - smoothtask-core/src/classify/rules.rs: Улучшения классификации
    - Множество других файлов с улучшениями и исправлениями
  - Результаты: Значительное улучшение производительности, надежности и поддерживаемости

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.