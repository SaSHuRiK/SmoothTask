# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-687: Зафиксировать изменения в коде и документации
  - Тип: Git / Code Management
  - Примечания: Коммит изменений в ranker.rs, onnx_ranker.rs и API.md
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~10 минут
  - Критерии готовности:
    - [x] Проверить, что все изменения работают корректно
    - [x] Убедиться, что тесты проходят
    - [x] Сделать осмысленный коммит с описанием изменений
    - [x] Обновить PLAN.md
  - Изменённые файлы:
    - smoothtask-core/src/model/ranker.rs: Добавлены новые тесты для edge cases
    - smoothtask-core/src/model/onnx_ranker.rs: Исправлена обработка ошибок mutex
    - docs/API.md: Добавлена документация по новым API endpoints
  - Результаты: Все изменения закоммичены, тесты проходят, код компилируется без ошибок

- [ ] ST-688: Провести аудит кода на наличие потенциальных проблем
  - Тип: Code Quality / Audit
  - Примечания: Проверка кода на наличие unwrap(), panic! и других антипаттернов
  - Приоритет: Средний
  - Статус: TODO
  - Время выполнения: ~20 минут
  - Критерии готовности:
    - [ ] Проверить критические модули на наличие unsafe кода
    - [ ] Заменить unwrap() на правильную обработку ошибок
    - [ ] Добавить тесты для критических участков
    - [ ] Документировать найденные проблемы

- [ ] ST-689: Улучшить покрытие тестами для модуля onnx_ranker
  - Тип: Testing / QA
  - Примечания: Добавление тестов для ONNX-ранкера
  - Приоритет: Средний
  - Статус: TODO
  - Время выполнения: ~30 минут
  - Критерии готовности:
    - [ ] Добавить тесты для основного функционала
    - [x] Исправить обработку ошибок mutex (уже сделано)
    - [ ] Добавить тесты для edge cases
    - [ ] Проверить производительность


## 2. Бэклог

- [x] ST-667: Обновить документацию по ML и обучению моделей
  - Тип: Documentation / ML
  - Примечания: Создание комплексного руководства по сбору данных и обучению моделей
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Критерии готовности:
    - ✅ Создание руководства по сбору данных
    - ✅ Создание руководства по обучению моделей
    - ✅ Добавление примеров использования
    - ✅ Обновление существующей документации
    - ✅ Добавление диаграмм и визуализаций
  - Изменённые файлы:
    - docs/ML_CLASSIFICATION.md: Обновление документации по ML
    - docs/CATBOOST_V1_GUIDE.md: Добавление руководства по CatBoost
    - docs/ONNX_INTEGRATION.md: Обновление документации по ONNX
    - smoothtask-trainer/README.md: Обновление примеров
  - Результаты: Полная и актуальная документация по ML workflow с примерами и руководствами

## 3. Недавно сделано (Recently Done)

- [x] ST-687: Зафиксировать изменения в коде и документации
  - Тип: Git / Code Management
  - Примечания: Коммит изменений в ranker.rs, onnx_ranker.rs и API.md
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~10 минут
  - Результаты: Все изменения закоммичены, тесты проходят, код компилируется без ошибок

- [x] ST-686: Провести комплексное тестирование для проверки стабильности
  - Тип: Testing / QA
  - Примечания: Запуск полного набора тестов для проверки отсутствия регрессий
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~15 минут
  - Результаты: Исправлено 2 падающих теста, все критические модули проходят тесты успешно

- [x] ST-685: Улучшить документацию по обработке ошибок
  - Тип: Documentation / Code Quality
  - Примечания: Документирование подходов к обработке ошибок и лучших практик
  - Приоритет: Низкий
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Результаты: Полная документация по обработке ошибок с примерами кода и лучшими практиками

- [x] ST-684: Добавить дополнительные тесты для edge cases в ranker.rs
  - Тип: Testing / QA
  - Примечания: Улучшение покрытия тестами для крайних случаев и граничных условий
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Результаты: Добавлено 3 новых комплексных теста, улучшено покрытие edge cases

- [x] ST-683: Улучшить покрытие тестами для ranker.rs
  - Тип: Testing / QA
  - Примечания: Добавить дополнительные тесты для edge cases
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Результаты: Добавлено 4 новых теста, улучшено покрытие edge cases

- [x] ST-682: Исправить потенциальные паники в onnx_ranker.rs
  - Тип: Rust / core / code quality
  - Примечания: Замена unwrap() на правильную обработку ошибок в mutex.lock()
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~10 минут
  - Результаты: Устранена потенциальная паника при poisoned mutex

- [x] ST-681: Улучшить покрытие тестами для критических модулей
  - Тип: Testing / QA
  - Примечания: Добавить тесты для недостаточно покрытых модулей
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Результаты: Добавлено 4 новых теста для ranker.rs, улучшено покрытие edge cases

- [x] ST-680: Обновить документацию по API и архитектуре
  - Тип: Documentation / Architecture
  - Примечания: Приведение документации в соответствие с текущим состоянием кода
  - Приоритет: Низкий
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Результаты: Добавлена документация по 12 новым API endpoints, обновлена информация о eBPF

*(Более старые выполненные задачи перенесены в архив: docs/history/PLAN_DONE_archive.md)*

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.
