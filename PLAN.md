# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [ ] ST-573: Добавить интеграционные тесты для eBPF модуля с реальными eBPF программами
  - Тип: Rust / core / metrics / eBPF / tests
  - Критерии готовности:
    - [ ] Создать тестовые eBPF программы для тестирования
    - [ ] Написать интеграционные тесты, проверяющие реальный сбор данных
    - [ ] Добавить тесты для различных сценариев использования
    - [ ] Убедиться, что тесты работают в CI/CD окружении
  - Примечания: Повышение надежности eBPF функциональности через интеграционное тестирование
  - Приоритет: Высокий
  - Оценка времени: ~90 минут
  - Зависимости: Реальные eBPF программы и тестовое окружение

- [ ] ST-574: Оптимизировать использование памяти в eBPF модуле
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [ ] Проанализировать текущее использование памяти
    - [ ] Оптимизировать кэширование и буферизацию
    - [ ] Уменьшить накладные расходы на хранение метрик
    - [ ] Добавить тесты для проверки оптимизаций
  - Примечания: Улучшение производительности и уменьшение memory footprint
  - Приоритет: Средний
  - Оценка времени: ~60 минут

- [ ] ST-575: Добавить поддержку дополнительных eBPF метрик (сетевые соединения, процесс-специфичные метрики)
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [ ] Исследовать дополнительные eBPF возможности
    - [ ] Реализовать сбор новых типов метрик
    - [ ] Обновить конфигурацию и API
    - [ ] Добавить соответствующие тесты
  - Примечания: Расширение функциональности eBPF для более детального мониторинга
  - Приоритет: Низкий
  - Оценка времени: ~120 минут

## 2. Бэклог

- [ ] ST-576: Улучшить документацию API для eBPF модуля
  - Тип: Documentation / API
  - Примечания: Создание подробной документации для интеграции eBPF в другие модули
  - Приоритет: Низкий

- [ ] ST-577: Добавить примеры использования eBPF в примерах кода
  - Тип: Documentation / Examples
  - Примечания: Демонстрация различных сценариев использования eBPF функциональности
  - Приоритет: Низкий

- [ ] ST-578: Оптимизировать загрузку eBPF программ для уменьшения времени инициализации
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Улучшение производительности загрузки eBPF программ
  - Приоритет: Средний

## 3. Недавно сделано (Recently Done)

- [x] ST-572: Улучшить документацию и комментарии в eBPF модуле
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Повышение читаемости и поддерживаемости кода
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Улучшена документация модуля, добавлены подробные комментарии к ключевым функциям
  - Результаты: Значительное улучшение документации и читаемости кода

- [x] ST-571: Заменить placeholder реализации на реальный сбор данных
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Завершение реализации реального сбора данных из eBPF
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Заменены все placeholder методы на реальные реализации с использованием iterate_ebpf_map_keys
  - Результаты: Полная реализация сбора данных из eBPF карт с улучшенной производительностью и надежностью

- [x] ST-570: Исправить дублирующиеся методы в eBPF модуле
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Улучшение качества кода и устранение дубликатов методов
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Удалены дублирующиеся placeholder методы, сохранены реальные реализации
  - Результаты: Улучшенное качество кода, устранение дубликатов, сохранение функциональности

- [x] ST-569: Оптимизировать производительность сбора eBPF метрик
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Повышение эффективности сбора eBPF метрик через параллельную обработку и улучшенное кэширование
  - Статус: COMPLETED
  - Время выполнения: ~25 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Добавлен метод collect_detailed_stats_parallel, оптимизирован collect_real_ebpf_metrics
  - Результаты: Значительное улучшение производительности сбора eBPF метрик

- [x] ST-568: Улучшить обработку ошибок и логирование в eBPF модуле
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Повышение надежности и отказоустойчивости eBPF функциональности с улучшенной диагностикой
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Улучшена обработка ошибок, добавлены методы get_detailed_error_info, has_errors, attempt_recovery
  - Результаты: Более надежная eBPF функциональность с улучшенной диагностикой и восстановлением

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.