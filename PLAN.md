# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-819: Интегрировать GPU метрики в основной цикл сбора метрик
  - Тип: Rust / core / metrics / integration
  - Примечания: Интеграция новых NVML и AMDGPU метрик в основной модуль сбора метрик
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - [x] Обновить основной модуль metrics для включения GPU метрик
    - [x] Добавить функции для объединения метрик от разных GPU поставщиков
    - [x] Интегрировать с существующей системой логирования и обработки ошибок
    - [x] Добавить тесты для интеграции
  - Ожидаемые результаты: Полная интеграция GPU мониторинга в основной цикл сбора данных
  - Результаты:
    - Добавлены функции integrate_nvml_metrics() и integrate_amdgpu_metrics() в system.rs
    - Обновлена функция collect_gpu_metrics() для использования новых NVML и AMDGPU метрик
    - Реализована конвертация метрик из NVML/AMDGPU форматов в унифицированный GpuMetrics формат
    - Добавлены тесты для проверки интеграции (test_gpu_metrics_integration, test_nvml_integration_with_empty_collection, test_amdgpu_integration_with_empty_collection, test_gpu_metrics_integration_fallback)
    - Интеграция включает преобразование единиц измерения (mW → W, % → 0.0-1.0)
    - Добавлена поддержка логирования при обнаружении GPU устройств
    - Реализована обработка ошибок с graceful degradation

- [ ] ST-820: Добавить поддержку мониторинга GPU температуры в существующий модуль system.rs
  - Тип: Rust / core / metrics / system
  - Примечания: Расширение существующего мониторинга температуры для включения GPU
  - Приоритет: Средний
  - Оценка времени: ~45 минут
  - Критерии готовности:
    - [ ] Обновить функцию collect_temperature_metrics для включения GPU температур
    - [ ] Добавить приоритизацию источников температуры (CPU vs GPU)
    - [ ] Обновить структуры данных для хранения GPU температур
    - [ ] Добавить тесты для нового функционала
  - Ожидаемые результаты: Более полный мониторинг температуры системы с поддержкой GPU

- [ ] ST-821: Улучшить обработку ошибок в GPU модулях с более детальными сообщениями
  - Тип: Rust / core / metrics / error_handling
  - Примечания: Улучшение сообщений об ошибках и механизмов восстановления для GPU мониторинга
  - Приоритет: Средний
  - Оценка времени: ~30 минут
  - Критерии готовности:
    - [ ] Улучшить сообщения об ошибках в nvml_wrapper.rs
    - [ ] Улучшить сообщения об ошибках в amdgpu_wrapper.rs
    - [ ] Добавить более детальную информацию о контексте ошибок
    - [ ] Добавить тесты для проверки улучшенных сообщений об ошибках
  - Ожидаемые результаты: Более устойчивая система GPU мониторинга с лучшей диагностикой

## 2. Бэклог

- [x] ST-816: Реализовать поддержку мониторинга GPU через NVML и AMDGPU
  - Тип: Rust / core / metrics / gpu
  - Примечания: Расширенный мониторинг GPU с поддержкой NVIDIA и AMD
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~120 минут
  - Оценка времени: ~120 минут
  - Критерии готовности:
    - [x] Исследовать NVML и AMDGPU API
    - [x] Реализовать базовый сбор метрик GPU
    - [x] Интегрировать с существующей системой метрик
    - [x] Добавить тесты для нового функционала
  - Ожидаемые результаты: Более детальный мониторинг GPU активности
  - Результаты:
    - Созданы модули nvml_wrapper.rs и amdgpu_wrapper.rs
    - Реализованы функции для обнаружения и мониторинга NVIDIA GPU устройств
    - Реализованы функции для обнаружения и мониторинга AMD GPU устройств
    - Добавлены структуры данных для метрик GPU (использование, память, температура, мощность, тактовые частоты)
    - Добавлены comprehensive тесты для обоих модулей
    - Интегрированы модули в основной модуль metrics
    - Реализована обработка ошибок и graceful degradation
    - Добавлена поддержка сериализации/десериализации для всех структур данных

- [x] ST-817: Улучшить систему логирования с ротацией и сжатием
  - Тип: Rust / core / logging
  - Примечания: Улучшенная система логирования с автоматическим управлением
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~90 минут
  - Оценка времени: ~90 минут
  - Критерии готовности:
    - [x] Исследовать существующие решения для ротации логов
    - [x] Реализовать автоматическую ротацию и сжатие
    - [x] Добавить конфигурацию для управления логированием
    - [x] Добавить тесты для нового функционала
  - Ожидаемые результаты: Более эффективное управление логами
  - Результаты:
    - Система логирования уже имеет полноценную функциональность ротации и сжатия
    - Модули rotation.rs и app_rotation.rs предоставляют автоматическую ротацию
    - Поддержка ротации по размеру и времени
    - Поддержка сжатия ротированных логов с использованием gzip
    - Поддержка управления количеством сохраняемых ротированных файлов
    - Comprehensive тесты для всех функций ротации и сжатия
    - Поддержка конфигурации через LogRotator и AppLogRotator
    - Graceful degradation и обработка ошибок

- [x] ST-818: Добавить поддержку мониторинга температуры CPU/GPU
  - Тип: Rust / core / metrics / system
  - Примечания: Мониторинг температуры для лучшего управления производительностью
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - [x] Исследовать доступные источники данных для температуры
    - [x] Реализовать сбор метрик температуры
    - [x] Интегрировать с существующей системой метрик
    - [x] Добавить тесты для нового функционала
  - Ожидаемые результаты: Более полный мониторинг системы
  - Результаты:
    - Система уже имеет полноценную функциональность мониторинга температуры
    - Поддержка мониторинга CPU температуры через hwmon и thermal интерфейсы
    - Поддержка мониторинга GPU температуры для AMD и NVIDIA устройств
    - Приоритезация источников температуры для точного определения
    - Comprehensive тесты для всех функций мониторинга температуры
    - Интеграция с существующей системой метрик
    - Graceful degradation и обработка ошибок
    - Поддержка различных температурных сенсоров и интерфейсов

## 3. Недавно сделано (Recently Done)

- [x] ST-819: Интегрировать GPU метрики в основной цикл сбора метрик
  - Тип: Rust / core / metrics / integration
  - Примечания: Интеграция новых NVML и AMDGPU метрик в основной модуль сбора метрик
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - [x] Обновить основной модуль metrics для включения GPU метрик
    - [x] Добавить функции для объединения метрик от разных GPU поставщиков
    - [x] Интегрировать с существующей системой логирования и обработки ошибок
    - [x] Добавить тесты для интеграции
  - Ожидаемые результаты: Полная интеграция GPU мониторинга в основной цикл сбора данных
  - Результаты:
    - Добавлены функции integrate_nvml_metrics() и integrate_amdgpu_metrics() в system.rs
    - Обновлена функция collect_gpu_metrics() для использования новых NVML и AMDGPU метрик
    - Реализована конвертация метрик из NVML/AMDGPU форматов в унифицированный GpuMetrics формат
    - Добавлены тесты для проверки интеграции (test_gpu_metrics_integration, test_nvml_integration_with_empty_collection, test_amdgpu_integration_with_empty_collection, test_gpu_metrics_integration_fallback)
    - Интеграция включает преобразование единиц измерения (mW → W, % → 0.0-1.0)
    - Добавлена поддержка логирования при обнаружении GPU устройств
    - Реализована обработка ошибок с graceful degradation

- [x] ST-815: Расширить интеграционное тестирование для критических сценариев
  - Тип: Testing / integration
  - Примечания: Дополнительные интеграционные тесты для ключевых сценариев
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~90 минут
  - Оценка времени: ~90 минут
  - Критерии готовности:
    - [x] Идентифицировать критические сценарии без тестов
    - [x] Добавить интеграционные тесты для основных потоков
    - [x] Тестирование взаимодействия между компонентами
    - [x] Добавить тесты для edge cases
  - Ожидаемые результаты: Более надежная система с лучшим покрытием тестами
  - Результаты:
    - Добавлены тесты для обработки ошибок и невалидных запросов
    - Добавлены тесты для graceful degradation при отсутствии данных
    - Добавлены тесты для параллельных запросов и производительности
    - Добавлены тесты для интеграции между компонентами
    - Добавлены тесты для edge cases (пустые параметры, большие payload, специальные символы)
    - Добавлены комплексные тесты для всех основных endpoint

- [x] ST-814: Добавить валидацию конфигурации с детальными сообщениями об ошибках
  - Тип: Rust / core / config
  - Примечания: Улучшенная валидация конфигурационных файлов
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Оценка времени: ~45 минут
  - Критерии готовности:
    - [x] Проанализировать текущую валидацию конфигурации
    - [x] Добавить более строгую валидацию параметров
    - [x] Улучшить сообщения об ошибках конфигурации
    - [x] Добавить тесты для валидации конфигурации
  - Ожидаемые результаты: Более надежная конфигурация с лучшей обратной связью
  - Результаты:
    - Добавлена валидация для MLClassifierConfig (confidence_threshold и model_path)
    - Добавлена валидация для PatternAutoUpdateConfig (interval_sec)
    - Добавлена валидация для NotificationConfig (app_name)
    - Добавлена валидация для ModelConfig (model_path)
    - Интегрирована валидация в основную функцию Config::validate()
    - Добавлены comprehensive тесты для всех новых валидаций
    - Улучшены сообщения об ошибках с четкими инструкциями

- [x] ST-813: Улучшить обработку ошибок и сообщения об ошибках
  - Тип: Rust / core / error_handling
  - Примечания: Более информативные сообщения об ошибках и механизмы восстановления
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - [x] Проанализировать текущие сообщения об ошибках
    - [x] Улучшить сообщения с контекстной информацией
    - [x] Добавить механизмы graceful degradation
    - [x] Обновить тесты на обработку ошибок
  - Ожидаемые результаты: Более устойчивая система с лучшей диагностикой
  - Результаты:
    - Улучшены сообщения об ошибках в модуле network.rs с добавлением контекстной информации и инструкций по устранению неполадок
    - Улучшены сообщения об ошибках в модуле windows_x11.rs с добавлением подробных инструкций по диагностике и устранению проблем
    - Добавлены тесты для проверки улучшенных сообщений об ошибках
    - Система уже имеет отличные механизмы graceful degradation для обработки ошибок компонентов
    - Добавлены comprehensive тесты для проверки обработки ошибок

- [x] ST-812: Улучшить документацию API и добавить примеры использования
  - Тип: Documentation / API
  - Примечания: Расширение документации API с практическими примерами
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~90 минут
  - Оценка времени: ~90 минут
  - Критерии готовности:
    - [x] Обновить API.md с детальным описанием всех endpoints
    - [x] Добавить примеры использования в документацию
    - [x] Создать примеры конфигурационных файлов
    - [x] Добавить документацию по интеграции
  - Ожидаемые результаты: Более доступная и полная документация для пользователей
  - Результаты:
    - Добавлены примеры интеграции с Prometheus и Grafana
    - Добавлены примеры автоматизации с помощью скриптов на Python и Bash
    - Добавлены примеры конфигурационных файлов для разработки, производства и игровых систем
    - Добавлена документация по устранению неполадок и миграции
    - Добавлены лучшие практики по оптимизации производительности и безопасности

- [x] ST-806: Добавить поддержку мониторинга сетевых соединений на уровне приложений
  - Тип: Rust / core / metrics / network
  - Примечания: Расширенный мониторинг сетевых соединений с привязкой к приложениям
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - [x] Исследовать доступные источники данных для сетевых соединений
    - [x] Реализовать сбор метрик сетевых соединений с привязкой к PID
    - [x] Улучшить существующий модуль process_network.rs
    - [x] Добавить тесты для нового функционала
  - Ожидаемые результаты: Более детальный мониторинг сетевой активности на уровне процессов
  - Результаты:
    - Улучшен модуль process_network.rs с поддержкой привязки соединений к процессам
    - Реализована функция is_connection_for_pid() для определения принадлежности соединений
    - Улучшены методы collect_tcp_stats() и collect_udp_stats() для работы с PID
    - Добавлена поддержка /proc/net/tcp6 и /proc/net/udp6 для получения inode информации
    - Реализована проверка файловых дескрипторов процессов для определения принадлежности соединений
    - Добавлены comprehensive тесты для нового функционала
    - Улучшена обработка ошибок и graceful degradation
    - Полная интеграция с существующей системой метрик

*(Более старые задачи перенесены в архив: см. docs/history/)*

## 4. Блокеры

*(На данный момент нет активных блокеров)*