# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [ ] ST-619: Добавить поддержку мониторинга энергопотребления процессов
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Реализация мониторинга энергопотребления на уровне процессов с использованием eBPF
  - Приоритет: Средний
  - Оценка времени: ~90 минут
  - Зависимости: Текущая реализация eBPF модуля
  - Критерии готовности:
    - eBPF программа для мониторинга энергопотребления процессов
    - Интеграция с метриками в ebpf.rs
    - Новый API endpoint /api/processes/energy
    - Комплексные тесты для нового функционала
    - Документация API

- [ ] ST-620: Улучшить обработку ошибок в модуле метрик GPU
  - Тип: Rust / core / metrics
  - Примечания: Добавление более детальных сообщений об ошибках и улучшение graceful degradation для метрик GPU
  - Приоритет: Средний
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - Улучшенные сообщения об ошибках с практическими рекомендациями
    - Graceful degradation при недоступности GPU компонентов
    - Тесты для проверки обработки ошибок

## 2. Бэклог

- [ ] ST-621: Добавить поддержку мониторинга использования памяти на уровне процессов
  - Тип: Rust / core / metrics
  - Примечания: Реализация детализированного мониторинга использования памяти процессами
  - Приоритет: Низкий
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - Интеграция с существующими метриками процессов
    - Новый API endpoint /api/processes/memory
    - Комплексные тесты для нового функционала

- [ ] ST-622: Улучшить обработку ошибок в модуле метрик сети
  - Тип: Rust / core / metrics
  - Примечания: Добавление более детальных сообщений об ошибках для сетевых метрик
  - Приоритет: Низкий
  - Оценка времени: ~45 минут
  - Критерии готовности:
    - Улучшенные сообщения об ошибках с практическими рекомендациями
    - Graceful degradation при недоступности сетевых интерфейсов
    - Тесты для проверки обработки ошибок

## 3. Недавно сделано (Recently Done)

- [x] ST-617: Добавить поддержку мониторинга температуры CPU через eBPF
  - Тип: Rust / core / metrics / eBPF / Hardware
  - Примечания: Реализация мониторинга температуры CPU с использованием eBPF и добавление API endpoint
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~90 минут
  - Критерии готовности:
    - ✅ eBPF программа для мониторинга температуры CPU (cpu_temperature.c)
    - ✅ Интеграция с метриками в ebpf.rs
    - ✅ Новый API endpoint /api/cpu/temperature с обработчиком cpu_temperature_handler
    - ✅ Комплексные тесты (test_cpu_temperature_endpoint_without_metrics, test_cpu_temperature_endpoint_with_metrics, test_cpu_temperature_endpoint_error_handling)
    - ✅ Документация API с примерами использования
  - Изменённые файлы:
    - smoothtask-core/src/ebpf_programs/cpu_temperature.c: Новая eBPF программа для мониторинга температуры
    - smoothtask-core/src/metrics/ebpf.rs: Интеграция сбора температуры CPU
    - smoothtask-core/src/api/server.rs: Добавлен обработчик cpu_temperature_handler и маршрут
    - smoothtask-core/tests/api_integration_test.rs: Добавлены комплексные тесты
    - docs/API.md: Добавлена документация для /api/cpu/temperature
  - Результаты: Полная реализация мониторинга температуры CPU через eBPF с поддержкой детализированной статистики по каждому ядру, API endpoint для мониторинга и комплексными тестами

- [x] ST-618: Улучшить обработку ошибок в системных метриках
  - Тип: Rust / core / metrics
  - Примечания: Добавление более детальных сообщений об ошибках и улучшение graceful degradation
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/system.rs: Улучшены сообщения об ошибках с практическими рекомендациями
    - smoothtask-core/tests/ebpf_integration_test.rs: Добавлены тесты для проверки обработки ошибок
  - Результаты: Полная реализация улучшенной обработки ошибок с детальными сообщениями, graceful degradation и комплексными тестами

*(Более старые выполненные задачи перенесены в архив: docs/history/PLAN_DONE_archive.md)*

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.
