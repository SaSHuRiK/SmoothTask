# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-809: Исправить причины зависания тестов в ConfigWatcher и PatternWatcher
  - Тип: Rust / core / testing / bugfix
  - Примечания: Исправление бесконечных циклов в файловом мониторинге
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Результаты:
    - Исправлены бесконечные циклы в ConfigWatcher::watch_config_file()
    - Исправлены бесконечные циклы в PatternWatcher::watch_patterns_directory()
    - Заменены блокирующие вызовы rx.recv() на неблокирующие rx.try_recv()
    - Добавлены небольшие задержки для избежания busy waiting
    - Успешная компиляция без ошибок
    - Базовые тесты проходят успешно

- [x] ST-807: Исправить дублирующуюся тестовую функцию test_gpu_update_temp_power_handler
  - Тип: Rust / core / testing / bugfix
  - Примечания: Удаление дублирующейся тестовой функции, вызывающей ошибку компиляции
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~5 минут
  - Результаты:
    - Удалена дублирующаяся функция test_gpu_update_temp_power_handler()
    - Сохранена полная версия теста с проверками
    - Успешная компиляция без ошибок
    - Восстановлена возможность запуска тестов

- [x] ST-809: Исправить причины зависания тестов в ConfigWatcher и PatternWatcher
  - Тип: Rust / core / testing / bugfix
  - Примечания: Исправление бесконечных циклов в файловом мониторинге
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Оценка времени: ~30 минут
  - Критерии готовности:
    - [x] Проанализировать текущие тесты на наличие бесконечных циклов
    - [x] Выявить конкретные тесты, вызывающие зависание
    - [x] Разработать стратегию оптимизации или исправления
    - [x] Реализовать исправления в ConfigWatcher и PatternWatcher
    - [x] Проверить успешную компиляцию после исправлений
  - Ожидаемые результаты: Устранение зависания тестовой инфраструктуры
  - Результаты:
    - Исправлены бесконечные циклы в ConfigWatcher::watch_config_file()
    - Исправлены бесконечные циклы в PatternWatcher::watch_patterns_directory()
    - Заменены блокирующие вызовы rx.recv() на неблокирующие rx.try_recv()
    - Добавлены небольшие задержки для избежания busy waiting
    - Успешная компиляция без ошибок
    - Базовые тесты проходят успешно

## 2. Бэклог

- [ ] ST-804: Реализовать систему автоматического масштабирования приоритетов на основе нагрузки системы
  - Тип: Rust / core / policy / dynamic
  - Примечания: Динамическое масштабирование приоритетов процессов на основе текущей нагрузки системы
  - Приоритет: Средний
  - Статус: TODO
  - Время выполнения: ~90 минут
  - Оценка времени: ~90 минут
  - Критерии готовности:
    - [ ] Разработать алгоритм динамического масштабирования
    - [ ] Реализовать мониторинг нагрузки системы
    - [ ] Интегрировать с существующей системой политик
    - [ ] Добавить тесты для нового функционала
  - Ожидаемые результаты: Более адаптивное управление приоритетами процессов

- [ ] ST-805: Улучшить систему логирования с поддержкой ротации по времени и размеру
  - Тип: Rust / core / logging / rotation
  - Примечания: Расширенная система ротации логов с поддержкой времени и размера
  - Приоритет: Средний
  - Статус: TODO
  - Время выполнения: ~60 минут
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - [ ] Реализовать ротацию по времени
    - [ ] Реализовать ротацию по размеру
    - [ ] Добавить настройку политик ротации
    - [ ] Добавить тесты для нового функционала
  - Ожидаемые результаты: Более гибкая система управления логами

- [ ] ST-806: Добавить поддержку мониторинга сетевых соединений на уровне приложений
  - Тип: Rust / core / metrics / network
  - Примечания: Расширенный мониторинг сетевых соединений с привязкой к приложениям
  - Приоритет: Средний
  - Статус: TODO
  - Время выполнения: ~60 минут
  - Оценка времени: ~60 минут
  - Критерии готовности:
    - [ ] Исследовать доступные источники данных для сетевых соединений
    - [ ] Реализовать сбор метрик сетевых соединений
    - [ ] Интегрировать с существующей системой классификации
    - [ ] Добавить тесты для нового функционала
  - Ожидаемые результаты: Более детальный мониторинг сетевой активности

## 3. Недавно сделано (Recently Done)

- [x] ST-807: Исправить дублирующуюся тестовую функцию test_gpu_update_temp_power_handler
  - Тип: Rust / core / testing / bugfix
  - Примечания: Удаление дублирующейся тестовой функции, вызывающей ошибку компиляции
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~5 минут
  - Результаты:
    - Удалена дублирующаяся функция test_gpu_update_temp_power_handler()
    - Сохранена полная версия теста с проверками
    - Успешная компиляция без ошибок
    - Восстановлена возможность запуска тестов

- [x] ST-803: Добавить поддержку мониторинга использования памяти GPU
  - Тип: Rust / core / metrics / gpu
  - Примечания: Расширение мониторинга GPU для включения использования памяти
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Результаты:
    - Добавлен новый API endpoint `/api/gpu/memory` для мониторинга использования памяти GPU
    - Реализована функция `gpu_memory_handler()` для обработки запросов к GPU памяти
    - Добавлена поддержка определения типа GPU (NVIDIA, AMD, Intel) на основе драйвера
    - Интегрировано с существующей системой сбора метрик GPU
    - Добавлены comprehensive тесты для нового API endpoint
    - Обновлен список доступных endpoints в `/api/endpoints`
    - Улучшена обработка ошибок и валидация данных

- [x] ST-802: Улучшить систему кэширования метрик процессов для уменьшения накладных расходов
  - Тип: Rust / core / metrics / optimization
  - Примечания: Оптимизация кэширования метрик процессов для уменьшения частоты системных вызовов
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Результаты:
    - Добавлена поддержка адаптивного кэширования с настройками enable_adaptive_caching, min_cache_ttl_seconds, max_cache_ttl_seconds
    - Добавлена поддержка приоритетного кэширования с настройками enable_priority_caching и priority_cache_multiplier
    - Реализована функция is_high_priority_process() для определения важных процессов
    - Реализована функция calculate_adaptive_ttl() для расчета индивидуального TTL для каждого процесса
    - Модифицирована структура CachedProcessRecord для хранения individual TTL
    - Обновлены функции cache_record(), get_cached() и cleanup_stale_entries() для поддержки адаптивного кэширования
    - Добавлены comprehensive тесты для нового функционала
    - Все существующие тесты обновлены для поддержки новых полей конфигурации

- [x] ST-801: Реализовать расширенный мониторинг температуры CPU с поддержкой нескольких источников
  - Тип: Rust / core / metrics / system
  - Примечания: Добавление мониторинга температуры CPU через различные источники (sysfs, coretemp, k10temp)
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Результаты:
    - Улучшена функция collect_temperature_metrics() с поддержкой приоритезации источников
    - Добавлена поддержка Intel CoreTemp, AMD K10Temp, AMD GPU, NVIDIA GPU
    - Реализована система приоритезации источников температуры
    - Добавлены comprehensive тесты для нового функционала
    - Улучшены логирование и обработка ошибок
    - Исправлены синтаксические ошибки и проблемы с компиляцией
    - Успешная интеграция с существующей системой метрик

*(Более старые задачи перенесены в архив: см. docs/history/)*

## 4. Блокеры

*(На данный момент нет активных блокеров)*