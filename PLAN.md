# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [ ] ST-535: Добавить документацию для новых eBPF функций и улучшений
  - Тип: Rust / core / metrics / eBPF / documentation
  - Критерии готовности:
    - [ ] Обновить EBPF_SETUP.md с информацией о новых функциях
    - [ ] Добавить примеры использования расширенного мониторинга системных вызовов
    - [ ] Документировать новые параметры конфигурации
    - [ ] Добавить раздел по устранению неполадок для сетевого мониторинга
    - [ ] Создать примеры интеграции с основной системой метрик
  - Примечания: Улучшение документации для новых eBPF функций
  - Приоритет: Высокий
  - Оценка времени: ~60 минут

- [ ] ST-536: Реализовать реальную загрузку и выполнение eBPF программ
  - Тип: Rust / core / metrics / eBPF / implementation
  - Критерии готовности:
    - [ ] Заменить заглушки на реальную загрузку eBPF программ
    - [ ] Интегрировать libbpf-rs для управления eBPF программами
    - [ ] Реализовать сбор метрик из eBPF карт
    - [ ] Добавить обработку ошибок для реальных eBPF операций
    - [ ] Обновить тесты для работы с реальными eBPF программами
  - Примечания: Переход от заглушек к реальной eBPF функциональности
  - Приоритет: Высокий
  - Оценка времени: ~120 минут

- [ ] ST-537: Добавить интеграционные тесты с реальными eBPF программами
  - Тип: Rust / core / metrics / eBPF / testing
  - Критерии готовности:
    - [ ] Создать тесты для реальной загрузки eBPF программ
    - [ ] Добавить тесты для сбора метрик из eBPF
    - [ ] Проверить совместимость с различными версиями ядра
    - [ ] Добавить тесты для обработки ошибок
    - [ ] Интегрировать с CI/CD пайплайном
  - Примечания: Повышение надежности eBPF функциональности
  - Приоритет: Средний
  - Оценка времени: ~90 минут

## 2. Бэклог

- [ ] ST-514: Оптимизировать производительность eBPF программ
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - ✅ Проанализировать текущую производительность eBPF программ
    - ✅ Оптимизировать использование карт и структур данных
    - ✅ Уменьшить накладные расходы на сбор метрик
    - ✅ Провести бенчмаркинг до и после оптимизации
  - Примечания: Улучшение производительности eBPF программ для снижения нагрузки на систему
  - Приоритет: Средний

- [ ] ST-515: Провести тестирование eBPF на реальных системах
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - ✅ Провести тестирование на различных конфигурациях ядра
    - ✅ Проверить совместимость с различными дистрибутивами Linux
    - ✅ Собрать метрики производительности и стабильности
    - ✅ Документировать результаты и ограничения
  - Примечания: Тестирование eBPF функциональности на реальных системах для обеспечения стабильности
  - Приоритет: Низкий

- [ ] ST-490: Реализовать расширенную систему уведомлений
  - Тип: Rust / core / notifications
  - Критерии готовности:
    - ✅ Исследовать возможности уведомлений через D-Bus
    - ✅ Добавить поддержку уведомлений о изменениях приоритетов
    - ✅ Интегрировать с системой логирования
  - Примечания: Улучшение пользовательского опыта
  - Приоритет: Низкий

- [ ] ST-538: Добавить поддержку мониторинга производительности GPU через eBPF
  - Тип: Rust / core / metrics / eBPF / GPU
  - Критерии готовности:
    - [ ] Исследовать возможности мониторинга GPU через eBPF
    - [ ] Реализовать eBPF программу для отслеживания активности GPU
    - [ ] Добавить поддержку в EbpfMetricsCollector
    - [ ] Интегрировать с основной системой метрик
  - Примечания: Расширенный мониторинг производительности GPU для улучшения анализа
  - Приоритет: Низкий

- [ ] ST-539: Добавить поддержку мониторинга файловой системы через eBPF
  - Тип: Rust / core / metrics / eBPF / filesystem
  - Критерии готовности:
    - [ ] Исследовать возможности мониторинга файловой системы через eBPF
    - [ ] Реализовать eBPF программу для отслеживания операций с файлами
    - [ ] Добавить поддержку в EbpfMetricsCollector
    - [ ] Интегрировать с основной системой метрик
  - Примечания: Расширенный мониторинг операций с файловой системой
  - Приоритет: Низкий

## 3. Недавно сделано (Recently Done)

- [x] ST-536: Реализовать реальную загрузку и выполнение eBPF программ
  - Тип: Rust / core / metrics / eBPF / implementation
  - Примечания: Успешная реализация реальной загрузки eBPF программ с использованием libbpf-rs. Добавлена поддержка мониторинга сетевой активности, улучшена обработка ошибок и добавлены новые возможности конфигурации.
  - Статус: COMPLETED
  - Время выполнения: ~120 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализована реальная загрузка eBPF программ с libbpf-rs
    - smoothtask-core/src/ebpf_programs/syscall_monitor_advanced.c: Добавлена расширенная eBPF программа для мониторинга системных вызовов
    - smoothtask-core/src/ebpf_programs/network_monitor.c: Добавлена eBPF программа для мониторинга сетевой активности
    - smoothtask-core/tests/ebpf_integration_test.rs: Добавлены комплексные интеграционные тесты
    - docs/EBPF_SETUP.md: Значительно улучшена документация с добавлением примеров использования
  - Новые возможности:
    - Реальная загрузка eBPF программ с libbpf-rs
    - Расширенный мониторинг системных вызовов с детализированной статистикой
    - Мониторинг сетевой активности с поддержкой статистики по IP адресам
    - Улучшенная обработка ошибок с graceful degradation
    - Валидация конфигурации и статистика инициализации
    - Комплексные интеграционные тесты и бенчмарки производительности

- [x] ST-537: Добавить интеграционные тесты с реальными eBPF программами
  - Тип: Rust / core / metrics / eBPF / testing
  - Примечания: Успешная реализация комплексных интеграционных тестов для eBPF функциональности, включая тесты производительности и обработки ошибок.
  - Статус: COMPLETED
  - Время выполнения: ~90 минут
  - Изменённые файлы:
    - smoothtask-core/tests/ebpf_integration_test.rs: Добавлены комплексные интеграционные тесты
    - smoothtask-core/tests/ebpf_mock_test.rs: Обновлены mock тесты
    - smoothtask-core/src/metrics/ebpf.rs: Добавлены новые тесты для улучшенной функциональности
  - Новые возможности:
    - Комплексные интеграционные тесты для eBPF функциональности
    - Тесты производительности и бенчмарки
    - Тесты обработки ошибок и graceful degradation
    - Тесты валидации конфигурации и статистики инициализации

См. архив: docs/history/PLAN_DONE_archive.md

См. архив: docs/history/PLAN_DONE_archive.md

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.