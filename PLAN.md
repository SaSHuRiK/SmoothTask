# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-459: Улучшение WaylandIntrospector для полной поддержки композиторов
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Протестировать с различными Wayland композиторами (KWin, Mutter, Sway, Hyprland)
    - Добавить обработку дополнительных протоколов при необходимости
    - Улучшить обработку ошибок и логирование
    - Написать интеграционные тесты для различных сценариев
  - Примечания: Улучшение стабильности и совместимости
  - Приоритет: Высокий
  - Подзадачи:
    - [x] ST-459-1: Добавить поддержку различных Wayland протоколов (KWin, Mutter, Sway, Hyprland)
    - [x] ST-459-2: Улучшить обработку ошибок и логирование в WaylandIntrospector
    - [x] ST-459-3: Добавить интеграционные тесты для различных сценариев

- [ ] ST-476: Улучшить обработку ошибок в модуле классификации
  - Тип: Rust / core / classify
  - Критерии готовности:
    - Добавить более детальные сообщения об ошибках
    - Улучшить обработку edge cases
    - Добавить логирование ошибок с контекстом
    - Написать дополнительные тесты
  - Примечания: Улучшение стабильности и отладки
  - Приоритет: Средний

- [ ] ST-475: Добавить поддержку мониторинга GPU метрик
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Реализовать сбор метрик GPU (загрузка, память, температура)
    - Поддержать различные GPU (NVIDIA, AMD, Intel)
    - Добавить интеграцию с существующей системой метрик
    - Написать unit и интеграционные тесты
  - Примечания: Расширение функциональности мониторинга
  - Приоритет: Низкий

## 2. Бэклог

- [ ] ST-475: Добавить поддержку мониторинга GPU метрик
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Реализовать сбор метрик GPU (загрузка, память, температура)
    - Поддержать различные GPU (NVIDIA, AMD, Intel)
    - Добавить интеграцию с существующей системой метрик
    - Написать unit и интеграционные тесты
  - Примечания: Расширение функциональности мониторинга
  - Приоритет: Низкий

- [ ] ST-476: Улучшить обработку ошибок в модуле классификации
  - Тип: Rust / core / classify
  - Критерии готовности:
    - Добавить более детальные сообщения об ошибках
    - Улучшить обработку edge cases
    - Добавить логирование ошибок с контекстом
    - Написать дополнительные тесты
  - Примечания: Улучшение стабильности и отладки
  - Приоритет: Средний

## 3. Недавно сделано (Recently Done)

- [x] ST-459: Улучшение WaylandIntrospector для полной поддержки композиторов
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Добавлена поддержка различных Wayland композиторов (KWin, Mutter, Sway, Hyprland)
    - Реализовано обнаружение типа композитора через переменные окружения и процессы
    - Улучшена обработка ошибок и логирование
    - Добавлены интеграционные тесты для различных сценариев
  - Примечания: Улучшение стабильности и совместимости с различными Wayland окружениями
  - Приоритет: Высокий
  - Статус: COMPLETED

- [x] ST-474: Оптимизация производительности API сервера
  - Тип: Rust / core / api
  - Примечания: Реализована система кэширования для часто запрашиваемых данных (процессы, группы приложений). Добавлены метрики производительности API с отслеживанием количества запросов, кэш-хитов, времени обработки. Создан новый endpoint /api/performance для мониторинга производительности. Улучшена обработка JSON-сериализации с добавлением информации о кэше.

- [x] ST-473: Добавить поддержку JSON Schema для API конфигурации
  - Тип: Documentation / API
  - Примечания: Сгенерировать JSON Schema для конфигурационного файла, добавить примеры валидации конфигурации, интегрировать схему в API документацию
  - Статус: COMPLETED

- [x] ST-472: Улучшить обработку ошибок в API сервере
  - Тип: Rust / core / api
  - Примечания: Улучшена валидация входных параметров для endpoint'ов /api/processes/:pid и /api/appgroups/:id. Добавлены проверки на допустимые диапазоны PID, длину и формат ID групп приложений. Улучшены сообщения об ошибках с добавлением детальной информации (поле, значение, ограничения, предложения). Улучшено логирование ошибок с контекстом. Добавлены дополнительные тесты для новых сценариев обработки ошибок.

- [x] ST-471: Исправить тест config watcher в run_daemon_test.rs
  - Тип: Rust / core / tests
  - Примечания: Исправлена ошибка с отсутствующим конфигурационным файлом для ConfigWatcher. Добавлено создание временного конфигурационного файла, исправлены проблемы с импортами и владением. Использован конкретный порт 18080 вместо порта 0 для совместимости с axum. Тест теперь компилируется и готов к выполнению.

См. архив: docs/history/PLAN_DONE_archive.md

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.