# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-423: Добавить поддержку мониторинга температуры и энергопотребления
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - ✅ Добавить сбор метрик температуры CPU/GPU через sysfs/hwmon
    - ✅ Добавить мониторинг энергопотребления через RAPL (Intel) или аналоги
    - ✅ Интегрировать новые метрики в SystemMetrics структуру
    - ✅ Добавить unit-тесты для новых функций
    - ✅ Обновить документацию с описанием новых метрик
  - Примечания: Расширение системного мониторинга для лучшего понимания теплового состояния и энергоэффективности.
  - Результаты:
    - Добавлены новые структуры TemperatureMetrics и PowerMetrics
    - Реализованы функции collect_temperature_metrics() и collect_power_metrics()
    - Интегрированы новые метрики в collect_system_metrics()
    - Добавлены unit-тесты для новых функций
    - Все 574 теста проходят успешно
    - Код компилируется без ошибок и предупреждений

- [ ] ST-424: Реализовать продвинутую систему логирования с ротацией логов
  - Тип: Rust / core / logging
  - Критерии готовности:
    - Добавить поддержку ротации логов по размеру и времени
    - Реализовать сжатие старых логов
    - Добавить конфигурационные параметры для настройки логирования
    - Обновить существующие тесты для проверки новой функциональности
    - Добавить документацию по настройке логирования
  - Примечания: Улучшение системы логирования для долговременного использования в production.

- [x] ST-425: Добавить поддержку мониторинга сетевой активности
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - ✅ Реализовать сбор метрик сетевой активности через /proc/net/dev
    - ✅ Добавить мониторинг основных сетевых интерфейсов
    - ✅ Интегрировать сетевые метрики в общую систему метрик
    - ✅ Добавить unit-тесты для новых функций
    - ✅ Обновить документацию с описанием сетевых метрик
  - Примечания: Расширение функциональности мониторинга для лучшего понимания сетевой нагрузки.
  - Результаты:
    - Добавлены новые структуры NetworkMetrics и NetworkInterface
    - Реализована функция collect_network_metrics() для сбора сетевых метрик
    - Интегрированы новые метрики в SystemMetrics и collect_system_metrics()
    - Добавлены unit-тесты для новых структур и функций
    - Все тесты проходят успешно

- [ ] ST-426: Улучшить систему классификации процессов с использованием ML
  - Тип: Rust / core / classify
  - Критерии готовности:
    - Проанализировать текущую систему классификации
    - Добавить поддержку ML-моделей для классификации процессов
    - Интегрировать ML-классификацию с существующей системой правил
    - Добавить тесты для проверки новой функциональности
    - Обновить документацию по классификации процессов
  - Примечания: Улучшение точности классификации процессов для более эффективного управления ресурсами.

- [x] ST-427: Добавить поддержку мониторинга дисковых операций
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - ✅ Реализовать сбор метрик дисковых операций через /proc/diskstats
    - ✅ Добавить мониторинг основных дисковых устройств
    - ✅ Интегрировать дисковые метрики в общую систему метрик
    - ✅ Добавить unit-тесты для новых функций
    - ✅ Обновить документацию с описанием дисковых метрик
  - Примечания: Расширение функциональности мониторинга для лучшего понимания нагрузки на дисковую подсистему.
  - Результаты:
    - Добавлены новые структуры DiskMetrics и DiskDevice
    - Реализована функция collect_disk_metrics() для сбора дисковых метрик
    - Интегрированы новые метрики в SystemMetrics и collect_system_metrics()
    - Добавлены unit-тесты для новых структур и функций
    - Все тесты проходят успешно

## 2. Бэклог

- [ ] ST-428: Реализовать систему оповещений и уведомлений
  - Тип: Rust / core / notifications
  - Критерии готовности:
    - Добавить систему оповещений для критических событий
    - Реализовать интеграцию с desktop notifications
    - Добавить конфигурационные параметры для настройки оповещений
    - Обновить документацию с описанием системы оповещений
  - Примечания: Улучшение пользовательского опыта через своевременные уведомления о важных событиях.

- [ ] ST-429: Добавить поддержку мониторинга GPU метрик
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Реализовать сбор метрик GPU через соответствующие интерфейсы
    - Добавить мониторинг основных параметров GPU
    - Интегрировать GPU метрики в общую систему метрик
    - Добавить unit-тесты для новых функций
    - Обновить документацию с описанием GPU метрик
  - Примечания: Расширение функциональности мониторинга для лучшего понимания нагрузки на графическую подсистему.

- [ ] ST-430: Улучшить систему конфигурации с поддержкой динамической перезагрузки
  - Тип: Rust / core / config
  - Критерии готовности:
    - Добавить поддержку динамической перезагрузки конфигурации
    - Реализовать механизм проверки изменений в конфигурационных файлах
    - Добавить конфигурационные параметры для настройки перезагрузки
    - Обновить документацию с описанием новой функциональности
  - Примечания: Улучшение гибкости системы через возможность изменения конфигурации без перезапуска демона.

## 3. Недавно сделано (Recently Done)

- [x] ST-427: Добавить поддержку мониторинга дисковых операций
  - Тип: Rust / core / metrics
  - Примечания: Расширение функциональности мониторинга для лучшего понимания нагрузки на дисковую подсистему.
  - Результаты:
    - Добавлены новые структуры DiskMetrics и DiskDevice
    - Реализована функция collect_disk_metrics() для сбора дисковых метрик
    - Интегрированы новые метрики в SystemMetrics и collect_system_metrics()
    - Добавлены unit-тесты для новых структур и функций
    - Все тесты проходят успешно

- [x] ST-425: Добавить поддержку мониторинга сетевой активности
  - Тип: Rust / core / metrics
  - Примечания: Расширение функциональности мониторинга для лучшего понимания сетевой нагрузки.
  - Результаты:
    - Добавлены новые структуры NetworkMetrics и NetworkInterface
    - Реализована функция collect_network_metrics() для сбора сетевых метрик
    - Интегрированы новые метрики в SystemMetrics и collect_system_metrics()
    - Добавлены unit-тесты для новых структур и функций
    - Все тесты проходят успешно

- [x] ST-422: Улучшить документацию для модуля аудио-метрик
  - Тип: Documentation
  - Примечания: Документация аудио-метрик теперь полная и актуальная.
  - Результаты:  
    - Полностью переработана документация модуля с добавлением обзорной информации
    - Добавлены примеры использования для всех основных структур и функций
    - Добавлена документация для XrunInfo с примерами
    - Добавлена информация о концепциях XRUN и аудио-клиентов
    - Добавлены разделы об обработке ошибок и тестировании

- [x] ST-421: Добавить unit-тесты для сценариев ошибок аудио-метрик
  - Тип: Rust / core / tests
  - Примечания: Комплексное тестирование обработки ошибок аудио-метрик.
  - Результаты:  
    - Добавлено 4 новых теста для сценариев ошибок в audio.rs
    - Добавлено 4 новых теста для сценариев ошибок в audio_pipewire.rs
    - Все 61 теста проходят успешно
    - Тесты покрывают edge cases, fallback поведение и обработку ошибок

- [x] ST-420: Реализовать правильную обработку ошибок для сбоев подключения PipeWire
  - Тип: Rust / core / metrics
  - Примечания: Улучшение пользовательского опыта при проблемах с PipeWire.
  - Результаты:  
    - Добавлена функция create_audio_introspector_with_fallback() для автоматического выбора бекенда
    - Улучшена обработка ошибок в call_pw_dump() с конкретными сообщениями для разных типов ошибок
    - Реализован graceful fallback на статический интроспектор при отсутствии PipeWire
    - Добавлены тесты для проверки fallback механизма

- [x] ST-419: Добавить комплексную обработку ошибок и логирование для сбора аудио-метрик
  - Тип: Rust / core / metrics
  - Примечания: Улучшение стабильности и отладки аудио-интеграции.
  - Результаты:  
    - Улучшена обработка ошибок в call_pw_dump() методе с проверкой доступности pw-dump
    - Добавлена функция check_pipewire_available() для диагностики
    - Улучшены сообщения об ошибках с конкретными рекомендациями для пользователей
    - Добавлены комментарии и документация для отладки
    - Все существующие тесты продолжают проходить

- [x] ST-418: Улучшить документацию по настройке и использованию
  - Тип: Documentation
  - Примечания: Значительно улучшена пользовательская документация.
  - Результаты:  
    - Создано комплексное руководство по установке docs/SETUP_GUIDE.md
    - Добавлен раздел устранения неполадок в README.md
    - Созданы примеры конфигураций для ноутбуков, серверов и рабочих станций
    - Обновлены ссылки и документация в README.md
    - Добавлены инструкции по установке для Ubuntu/Debian, Fedora, Arch Linux, openSUSE
    - Добавлены примеры настройки паттернов и API
    - Добавлены инструкции по мониторингу и обновлению

- [x] ST-417: Оптимизировать сбор метрик процессов
  - Тип: Rust / core / performance
  - Примечания: Реализована параллельная обработка процессов с использованием rayon для значительного улучшения производительности.
  - Результаты: 
    - Добавлена зависимость rayon и реализована параллельная обработка в collect_process_metrics()
    - Добавлены оптимизации памяти и оптимизирован парсинг cmdline
    - Создан файл process_parallel_test.rs с 3 тестами для проверки параллельной обработки
    - Все тесты проходят успешно, код компилируется без ошибок и предупреждений

- [x] ST-416: Добавить интеграционные тесты для API сервера
  - Тип: Rust / core / tests
  - Примечания: Добавлено комплексное тестирование API сервера с исправлением проблем таймаута.
  - Результаты: Создан файл api_integration_test.rs с 12 тестами, все тесты проходят успешно.

- [x] ST-415: Создать альтернативную систему измерения производительности
  - Тип: Rust / core / performance
  - Примечания: Решена проблема с criterion бенчмарками через создание альтернативной системы тестирования производительности.
  - Результаты: Создан файл performance_test.rs с 6 тестами производительности, все тесты проходят.

- [x] ST-411: Запустить бенчмарки и проанализировать результаты производительности
  - Тип: Rust / core / performance
  - Примечания: Успешный анализ производительности с реальными измерениями и созданием документации.
  - Результаты: Выявлены узкие места, создана документация PERFORMANCE.md с рекомендациями.

- [x] ST-406: Улучшить обработку ошибок и стабильность Wayland интеграции
  - Тип: Rust / core / metrics
  - Примечания: Улучшена стабильность Wayland интеграции для различных композиторов.
  - Результаты: Улучшена обработка ошибок и добавлены fallback механизмы.

- [x] ST-405: Обновить документацию API с последними изменениями
  - Тип: Rust / core / documentation
  - Примечания: Документация API теперь полная и актуальная для пользователей.
  - Результаты: Добавлена документация для всех 12 endpoints с примерами использования.

- [x] ST-011: Завершить реализацию WaylandIntrospector для поддержки Wayland-композиторов
  - Тип: Rust / core / metrics
  - Примечания: Wayland интеграция успешно реализована и завершена.
  - Результаты:  
    - Улучшена обработка ошибок и логирование
    - Удалены все TODOs и заменены на Notes с пояснениями
    - Исправлены все предупреждения компиляции
    - Обновлена документация для отражения текущего состояния
    - Все 20 тестов проходят успешно
    - Код компилируется без ошибок и предупреждений

*(Более старые задачи перенесены в архив: docs/history/PLAN_DONE_archive.md)*

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.