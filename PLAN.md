# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-570: Исправить дублирующиеся методы в eBPF модуле
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [x] Удалить дублирующиеся реализации методов
    - [x] Консолидировать логику сбора метрик
    - [x] Убедиться, что все методы используют реальные данные из eBPF карт
    - [x] Обновить тесты для проверки консолидированных методов
  - Примечания: Улучшение качества кода и устранение дубликатов
  - Приоритет: Высокий
  - Оценка времени: ~45 минут
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Удалены дублирующиеся placeholder методы (collect_memory_metrics_from_maps, collect_syscall_count_from_maps, collect_network_packets_from_maps, collect_network_bytes_from_maps, collect_gpu_usage_from_maps, collect_gpu_memory_from_maps, collect_filesystem_ops_from_maps)
    - Сохранены реальные реализации методов, которые читают данные из eBPF карт
  - Результаты: Улучшенное качество кода, устранение дубликатов, сохранение функциональности

- [ ] ST-571: Заменить placeholder реализации на реальный сбор данных
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [ ] Реализовать реальный сбор данных для всех оставшихся placeholder методов
    - [ ] Убедиться, что все методы используют iterate_ebpf_map_keys для полной итерации
    - [ ] Обновить тесты для проверки реальных данных
  - Примечания: Завершение реализации реального сбора данных из eBPF
  - Приоритет: Высокий
  - Оценка времени: ~60 минут

- [ ] ST-572: Улучшить документацию и комментарии в eBPF модуле
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [ ] Обновить документацию модуля
    - [ ] Добавить комментарии для сложных алгоритмов
    - [ ] Улучшить документацию публичных методов
  - Примечания: Повышение читаемости и поддерживаемости кода
  - Приоритет: Средний
  - Оценка времени: ~30 минут

## 3. Недавно сделано (Recently Done)

- [x] ST-570: Исправить дублирующиеся методы в eBPF модуле
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Улучшение качества кода и устранение дубликатов методов
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Удалены дублирующиеся placeholder методы, сохранены реальные реализации
  - Результаты: Улучшенное качество кода, устранение дубликатов, сохранение функциональности

- [x] ST-569: Оптимизировать производительность сбора eBPF метрик
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Повышение эффективности сбора eBPF метрик через параллельную обработку и улучшенное кэширование
  - Статус: COMPLETED
  - Время выполнения: ~25 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Добавлен метод collect_detailed_stats_parallel, оптимизирован collect_real_ebpf_metrics
  - Результаты: Значительное улучшение производительности сбора eBPF метрик

- [x] ST-568: Улучшить обработку ошибок и логирование в eBPF модуле
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Повышение надежности и отказоустойчивости eBPF функциональности с улучшенной диагностикой
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Улучшена обработка ошибок, добавлены методы get_detailed_error_info, has_errors, attempt_recovery
  - Результаты: Более надежная eBPF функциональность с улучшенной диагностикой и восстановлением

- [x] ST-567: Улучшить реализацию итерации по eBPF картам
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Улучшение функциональности eBPF для сбора полных данных через итерацию по всем ключам
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Добавлена функция iterate_ebpf_map_keys, обновлены методы сбора детализированной статистики
  - Результаты: Полная итерация по всем ключам eBPF карт, улучшенная производительность и надежность

- [x] ST-566: Реализовать реальный сбор данных из eBPF карт для collect_gpu_details()
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Замена placeholder кода на реальную функциональность eBPF для GPU
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализован метод collect_gpu_details() с реальным сбором данных
  - Результаты: Реальный сбор детализированной статистики GPU из eBPF карт

- [x] ST-565: Реализовать реальный сбор данных из eBPF карт для collect_filesystem_details()
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Замена placeholder кода на реальную функциональность eBPF для файловой системы
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализован метод collect_filesystem_details() с реальным сбором данных
  - Результаты: Реальный сбор детализированной статистики файловой системы из eBPF карт

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.