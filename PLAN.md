# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-558: Исправить предупреждения компиляции в коде
  - Тип: Rust / core / cleanup
  - Критерии готовности:
    - [x] Исправить предупреждения о бесполезных сравнениях (unused_comparisons)
    - [x] Исправить предупреждения о неиспользуемых переменных (unused_variables)
    - [x] Исправить предупреждения о неиспользуемых импортах (unused_imports)
    - [x] Убедиться, что код компилируется без предупреждений
  - Примечания: Очистка кода от предупреждений компиляции для улучшения качества
  - Приоритет: Средний
  - Оценка времени: ~30 минут
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Исправлены бесполезные сравнения и неиспользуемые переменные
    - smoothtask-core/src/metrics/system.rs: Исправлены бесполезные сравнения
    - smoothtask-core/tests/ebpf_integration_test.rs: Исправлены неиспользуемые переменные и импорты
    - smoothtask-core/tests/ml_classifier_integration_test.rs: Исправлены неиспользуемые импорты
  - Результаты: Код теперь компилируется без предупреждений

- [x] ST-559: Реализовать реальный сбор данных из eBPF карт
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [x] Заменить тестовые данные на реальный сбор из eBPF карт
    - [x] Реализовать методы для чтения данных из syscall_maps, network_maps и т.д.
    - [x] Обновить методы collect_syscall_details, collect_network_details и т.д.
    - [x] Убедиться, что eBPF программы корректно загружаются и работают
  - Примечания: Замена placeholder кода на реальную функциональность eBPF
  - Приоритет: Высокий
  - Оценка времени: ~60 минут
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализованы методы сбора данных из eBPF карт
    - Добавлены проверки на доступность карт и обработка ошибок
    - Обновлены методы загрузки программ для инициализации карт
  - Результаты: Реальный сбор данных из eBPF карт с улучшенной обработкой ошибок

- [x] ST-560: Добавить обработку ошибок для eBPF операций
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [x] Добавить проверки на наличие eBPF программ и карт
    - [x] Реализовать graceful fallback при ошибках eBPF
    - [x] Улучшить логирование ошибок eBPF
    - [x] Добавить методы для проверки доступности карт
    - [x] Добавить методы для получения информации о картах
  - Примечания: Улучшение надежности eBPF функциональности
  - Приоритет: Средний
  - Оценка времени: ~30 минут
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Добавлены методы check_maps_availability и get_maps_info
    - Улучшена обработка ошибок в методах сбора данных
    - Добавлены тесты для проверки обработки ошибок
  - Результаты: Улучшенная надежность и отказоустойчивость eBPF функциональности

- [ ] ST-515: Провести тестирование eBPF на реальных системах
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [ ] Провести тестирование на различных конфигурациях ядра
    - [ ] Проверить совместимость с различными дистрибутивами Linux
    - [ ] Собрать метрики производительности и стабильности
    - [ ] Документировать результаты и ограничения
  - Примечания: Тестирование eBPF функциональности на реальных системах для обеспечения стабильности
  - Приоритет: Низкий
  - Оценка времени: ~90 минут

- [ ] ST-561: Улучшить реализацию загрузки eBPF карт
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [ ] Реализовать реальную загрузку карт из eBPF программ
    - [ ] Заменить тестовые данные на реальный сбор данных из карт
    - [ ] Улучшить обработку ошибок при работе с картами
    - [ ] Добавить тесты для проверки реальной функциональности
  - Примечания: Улучшение eBPF функциональности для реального использования
  - Приоритет: Средний
  - Оценка времени: ~60 минут

- [ ] ST-490: Реализовать расширенную систему уведомлений
  - Тип: Rust / core / notifications
  - Критерии готовности:
    - [ ] Исследовать возможности уведомлений через D-Bus
    - [ ] Добавить поддержку уведомлений о изменениях приоритетов
    - [ ] Интегрировать с системой логирования
  - Примечания: Улучшение пользовательского опыта
  - Приоритет: Низкий

## 3. Недавно сделано (Recently Done)

- [x] ST-561: Исправить предупреждения компиляции в eBPF коде
  - Тип: Rust / core / metrics / eBPF / cleanup
  - Примечания: Удаление бесполезных сравнений для unsigned типов
  - Статус: COMPLETED
  - Время выполнения: ~15 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Удалены бесполезные сравнения >= 0 для unsigned типов
  - Результаты: Код теперь компилируется без предупреждений clippy

- [x] ST-560: Добавить обработку ошибок для eBPF операций
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Улучшение надежности eBPF функциональности
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Добавлены методы check_maps_availability и get_maps_info
    - Улучшена обработка ошибок в методах сбора данных
    - Добавлены тесты для проверки обработки ошибок
  - Результаты: Улучшенная надежность и отказоустойчивость eBPF функциональности

- [x] ST-559: Реализовать реальный сбор данных из eBPF карт
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Замена placeholder кода на реальную функциональность eBPF
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализованы методы сбора данных из eBPF карт
    - Добавлены проверки на доступность карт и обработка ошибок
    - Обновлены методы загрузки программ для инициализации карт
  - Результаты: Реальный сбор данных из eBPF карт с улучшенной обработкой ошибок

- [x] ST-558: Исправить предупреждения компиляции в коде
  - Тип: Rust / core / cleanup
  - Примечания: Очистка кода от предупреждений компиляции для улучшения качества
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Исправлены бесполезные сравнения и неиспользуемые переменные
    - smoothtask-core/src/metrics/system.rs: Исправлены бесполезные сравнения
    - smoothtask-core/tests/ebpf_integration_test.rs: Исправлены неиспользуемые переменные и импорты
    - smoothtask-core/tests/ml_classifier_integration_test.rs: Исправлены неиспользуемые импорты
  - Результаты: Код теперь компилируется без предупреждений

- [x] ST-557: Исправить ошибки в тестах перезагрузки паттернов
  - Тип: Rust / core / classify / testing
  - Примечания: Исправлена логика подсчета новых/измененных паттернов в PatternDatabase::reload()
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Изменённые файлы:
    - smoothtask-core/src/classify/rules.rs: Исправлена логика подсчета новых и измененных паттернов
  - Результаты: Все тесты классификации теперь проходят успешно

- [x] ST-556: Комплексная оптимизация и улучшения системы
  - Тип: Rust / core / metrics / eBPF / API / system
  - Примечания: Комплексные улучшения eBPF, API, системных метрик и общего качества кода
  - Статус: COMPLETED
  - Время выполнения: ~180 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Оптимизация eBPF с улучшенным кэшированием
    - smoothtask-core/src/api/server.rs: Улучшения API сервера
    - smoothtask-core/src/metrics/system.rs: Оптимизация системных метрик
    - smoothtask-core/src/classify/rules.rs: Улучшения классификации
    - Множество других файлов с улучшениями и исправлениями
  - Результаты: Значительное улучшение производительности, надежности и поддерживаемости

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.