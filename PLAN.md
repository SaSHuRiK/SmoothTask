# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [~] ST-011: Реализация WaylandIntrospector для поддержки Wayland-композиторов
  - Тип: Rust / core / metrics
  - Подзадачи:
    - [x] ST-011-1: Добавить зависимости wayland-client и wayland-protocols-wlr
    - [~] ST-011-2: Реализовать базовое подключение к Wayland композитору в WaylandIntrospector::new()
      - Примечания: Исправлены ошибки компиляции, упрощена структура. Полная реализация требует сложной работы с асинхронными событиями через wayland-client 0.31 API с использованием Dispatch трейтов для обработки событий реестра и wlr-foreign-toplevel-management протокола. Это выходит за рамки простой задачи (~30 минут) и требует дополнительного времени на изучение правильного использования wayland-client API. Код компилируется, тесты проходят.
    - [~] ST-011-3: Реализовать получение списка окон через wlr-foreign-toplevel-management протокол
      - Примечания: Зависит от ST-011-2. Требует правильной обработки событий через Dispatch трейты wayland-client для регистрации обработчиков событий toplevel (title, app_id, state, pid) и синхронизации состояния окон. Это сложная задача, требующая правильной работы с асинхронными событиями.
    - [x] ST-011-4: Добавить unit-тесты для WaylandIntrospector
      - Примечания: Добавлены базовые unit-тесты для проверки доступности и создания интроспектора. Тесты корректно обрабатывают случаи, когда Wayland недоступен или реализация не завершена. Все 6 тестов проходят успешно.
  - Критерии готовности:
    - Реализация WaylandIntrospector через wlr-foreign-toplevel-management;
    - Поддержка основных композиторов (Mutter, KWin, Sway, Hyprland);
    - Fallback на StaticWindowIntrospector, если Wayland недоступен;
    - Unit-тесты на парсинг окон и обработку ошибок.
  - Примечания: Wayland требует работы с wayland-client и специфичными протоколами композиторов. Это более сложная задача, чем X11. Базовая структура и функция проверки доступности уже реализованы в ST-039. Зависимости добавлены в ST-011-1. Создана базовая структура с заглушками и тестами. Полная реализация требует дополнительного времени на изучение правильного использования wayland-client 0.31 API для обработки асинхронных событий через Dispatch трейты. Код компилируется без ошибок, все тесты проходят.

## 2. Бэклог

(Пока нет задач в этом разделе)


## 3. Готово (Done)

- [x] ST-054: Добавление валидации для порогов latency (sched_latency_p99_threshold_ms и ui_loop_p95_threshold_ms)
  - Тип: Rust / core / config
  - Критерии готовности:
    - [x] Добавлена проверка sched_latency_p99_threshold_ms <= 1000.0 мс (1 секунда);
    - [x] Добавлена проверка ui_loop_p95_threshold_ms <= 1000.0 мс (1 секунда);
    - [x] Улучшены сообщения об ошибках с указанием проблемных значений;
    - [x] Unit-тесты для всех новых проверок (3 новых теста).
  - Примечания: добавлена валидация для предотвращения неразумных значений порогов latency. sched_latency_p99_threshold_ms ограничен 1000.0 мс для обеспечения разумного мониторинга латентности планировщика. ui_loop_p95_threshold_ms ограничен 1000.0 мс для обеспечения разумного мониторинга латентности UI. Все сообщения об ошибках теперь включают проблемные значения. Добавлены 3 новых unit-теста, покрывающих слишком большой sched_latency_p99_threshold_ms, слишком большой ui_loop_p95_threshold_ms и корректные значения. Все 186 тестов проекта проходят успешно.

- [x] ST-051: Добавление валидации для polling_interval_ms (максимальное значение) и max_candidates (разумные пределы)
  - Тип: Rust / core / config
  - Критерии готовности:
    - [x] Добавлена проверка polling_interval_ms <= 60000 мс (1 минута);
    - [x] Добавлена проверка max_candidates <= 10000;
    - [x] Улучшены сообщения об ошибках с указанием проблемных значений;
    - [x] Unit-тесты для всех новых проверок (3 новых теста).
  - Примечания: добавлена валидация для предотвращения неразумных значений конфигурации. polling_interval_ms ограничен 60000 мс для обеспечения отзывчивого мониторинга системы. max_candidates ограничен 10000 для предотвращения чрезмерного использования памяти. Все сообщения об ошибках теперь включают проблемные значения. Добавлены 3 новых unit-теста, покрывающих слишком большой polling_interval_ms, слишком большое max_candidates и корректные значения. Все 183 теста проекта проходят успешно.

- [x] ST-052: Добавление валидации для путей: проверка, что snapshot_db_path имеет расширение .sqlite или .db
  - Тип: Rust / core / config
  - Критерии готовности:
    - [x] Добавлена проверка расширения файла для snapshot_db_path (.sqlite или .db);
    - [x] Обработка случаев отсутствия расширения;
    - [x] Unit-тесты для всех сценариев (3 новых теста).
  - Примечания: добавлена валидация расширения файла для snapshot_db_path, чтобы гарантировать, что путь указывает на SQLite базу данных. Поддерживаются расширения .sqlite и .db. Добавлены 3 новых unit-теста, покрывающих отсутствие расширения, неправильное расширение и корректное расширение .db. Все 183 теста проекта проходят успешно.

- [x] ST-053: Улучшение сообщений об ошибках валидации: добавление более конкретных сообщений с указанием проблемных полей
  - Тип: Rust / core / config
  - Критерии готовности:
    - [x] Все сообщения об ошибках валидации включают проблемные значения;
    - [x] Сообщения об ошибках для percentiles включают префикс "thresholds.";
    - [x] Сообщения об ошибках для других полей thresholds включают префикс "thresholds.";
    - [x] Все существующие тесты проходят.
  - Примечания: улучшены все сообщения об ошибках валидации для включения проблемных значений и более конкретных указаний на проблемные поля. Это упрощает отладку конфигурации. Все существующие тесты проходят успешно, что подтверждает обратную совместимость.

- [x] ST-050: Добавление чтения и проверки cpu.weight в plan_priority_changes() и needs_change()
  - Тип: Rust / core / actuator
  - Критерии готовности:
    - [x] Добавлены поля current_cpu_weight и target_cpu_weight в PriorityAdjustment;
    - [x] Добавлено чтение cpu.weight в plan_priority_changes();
    - [x] Добавлена проверка cpu.weight в needs_change();
    - [x] Unit-тесты для проверки cpu.weight (2 новых теста).
  - Примечания: реализовано чтение и проверка cpu.weight для консистентности с другими приоритетами (nice, ionice, latency_nice). Добавлены поля current_cpu_weight и target_cpu_weight в структуру PriorityAdjustment. Функция plan_priority_changes() теперь читает текущий cpu.weight из cgroup процесса через read_cpu_weight(). Функция needs_change() проверяет, отличается ли текущий cpu.weight от целевого, и возвращает true, если cpu.weight неизвестен. Добавлены 2 новых unit-теста, покрывающих включение cpu.weight в PriorityAdjustment и проверку needs_change с cpu.weight. Все 178 unit-тестов проекта проходят успешно.

- [x] ST-000: Валидация конфигурации при загрузке
  - Примечания: покрыто юнит-тестом загрузки `Config::load`.
- [x] ST-003: Сбор пользовательского ввода (evdev) для user_active/idle
  - Примечания: добавлен `InputActivityTracker` с юнит-тестами, считает `user_active` и `time_since_last_input_ms` без зависимости от реального `/dev/input`.
- [x] ST-006: Классы приоритетов и маппинг на nice/ionice/cgroup
  - Примечания: реализованы все классы приоритетов с маппингом согласно POLICY.md, добавлены 10 unit-тестов, поддержка serde для сериализации.
- [x] ST-005-1: Каркас аудио метрик (структуры, трейт, статический бекенд)
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Структуры `AudioMetrics`, `AudioClientInfo`, `XrunInfo`;
    - Трейт `AudioIntrospector` с методами `audio_metrics()` и `clients()`;
    - `StaticAudioIntrospector` для тестов;
    - Unit-тесты на все компоненты (8 тестов).
  - Примечания: реализованы нормализованные структуры данных для XRUN событий и аудио-клиентов, трейт для абстракции бекендов, статический бекенд для тестов. Добавлены 8 unit-тестов, покрывающих основные сценарии. API готово для интеграции реальных PipeWire/PulseAudio адаптеров.
- [x] ST-004: Каркас WindowIntrospector и выбор фокусного окна
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Нормализованные структуры `WindowInfo`/`WindowState`;
    - Каркас интерфейса `WindowIntrospector` с базовым бекендом-заглушкой;
    - Юнит-тесты на выбор активного окна и корректность confidence.
  - Примечания: реализованы структуры и статический бекенд; выбор активного окна учитывает `pid_confidence`; добавлены функции `get_window_info_by_pid()` и `build_pid_to_window_map()`; покрыто 12 unit-тестами. Реальный X11/Wayland адаптер - отдельная задача из бэклога.
- [x] ST-007: Process Grouper для группировки процессов в AppGroup
  - Тип: Rust / core / classify
  - Критерии готовности:
    - Модуль `classify::grouper` с функцией `group_processes()`;
    - Группировка по cgroup_path (с нормализацией);
    - Группировка по дереву процессов (root и потомки);
    - Определение root_pid для каждой группы;
    - Агрегация метрик группы (CPU, IO, память, GUI, теги);
    - Unit-тесты на все сценарии группировки (8 тестов).
  - Примечания: реализован алгоритм группировки процессов в AppGroup с поддержкой группировки по cgroup и дереву процессов. Добавлены 8 unit-тестов, покрывающих пустой список, одиночный процесс, дерево процессов, группировку по cgroup, множественные группы, нормализацию cgroup, агрегацию метрик и независимые деревья.
- [x] ST-008-1: Структуры данных для паттернов и загрузка из YAML
  - Тип: Rust / core / classify
  - Критерии готовности:
    - Структуры для представления паттернов приложений (AppPattern, PatternCategory);
    - Загрузка паттернов из YAML файлов в директории patterns;
    - Поддержка сопоставления по exe_patterns, desktop_patterns, cgroup_patterns;
    - Unit-тесты на загрузку и парсинг паттернов.
  - Примечания: реализованы структуры PatternDatabase, AppPattern, PatternFile с загрузкой из YAML. Поддержка простых wildcard паттернов (*, ?). Добавлены 7 unit-тестов на загрузку и сопоставление паттернов.
- [x] ST-008-2: Классификатор процессов по паттернам
  - Тип: Rust / core / classify
  - Критерии готовности:
    - Функция классификации процессов и AppGroup по паттернам;
    - Заполнение process_type и tags в ProcessRecord;
    - Агрегация тегов для AppGroupRecord;
    - Unit-тесты на классификацию различных процессов.
  - Примечания: реализованы функции classify_process(), classify_app_group() и classify_all() для классификации процессов и групп по паттернам. Заполняются process_type и tags. Добавлены 4 unit-теста на классификацию (всего 11 тестов в модуле).
- [x] ST-009: Policy Engine: применение жёстких и семантических правил
  - Тип: Rust / core / policy
  - Критерии готовности:
    - Реализация жёстких правил (guardrails): защита системных процессов, RT-приоритеты, аудио, batch-группы;
    - Реализация семантических правил: фокусный GUI, активный терминал, updater/indexer, noisy neighbour;
    - Unit-тесты для всех правил (7 тестов);
    - API `PolicyEngine::evaluate_snapshot()` готово для использования в главном цикле демона.
  - Примечания: реализованы все основные правила согласно POLICY.md. Добавлены 7 unit-тестов, покрывающих все сценарии правил. Policy Engine определяет приоритеты для AppGroup на основе метрик и контекста.

- [x] ST-006: Классы приоритетов и маппинг на nice/ionice/cgroup
  - Примечания: реализованы все классы приоритетов с маппингом согласно POLICY.md, добавлены 10 unit-тестов, поддержка serde для сериализации.

- [x] ST-001: Глобальные метрики /proc + PSI
  - Примечания: реализованы парсеры и фиктивный /proc в тестах.

- [x] ST-002: Экспорт снапшотов в SQLite и чтение в трейнере
  - Примечания: реализованы тесты для записи (Rust) и чтения (Python), исправлена ошибка с количеством колонок в INSERT-запросе.
- [x] ST-010-2: Полная реализация управления cgroups v2
  - Тип: Rust / core / actuator
  - Критерии готовности:
    - [x] Определение cgroup процесса из /proc/[pid]/cgroup;
    - [x] Создание/использование cgroups для AppGroup (через прямое управление файловой системой);
    - [x] Установка cpu.weight через запись в /sys/fs/cgroup/.../cpu.weight;
    - [x] Перемещение процессов в нужные cgroups через cgroup.procs;
    - [x] Unit-тесты на парсинг cgroup и создание путей (4 теста).
  - Примечания: реализованы функции read_process_cgroup(), get_or_create_app_cgroup(), set_cpu_weight(), move_process_to_cgroup() и apply_cgroup(). Cgroups создаются под /sys/fs/cgroup/smoothtask/app-{app_group_id}. Добавлены 4 unit-теста, покрывающих парсинг cgroup v2 формата, обработку несуществующих PID, определение корня cgroup и создание путей для AppGroup. Реализация использует прямое управление файловой системой вместо cgroups-rs API, что является стандартным подходом в Linux.
- [x] ST-011-1: Сбор метрик процессов из /proc (легкие метрики)
  - Тип: Rust / core / metrics
  - Примечания: реализован модуль `metrics::process` с функцией `collect_process_metrics()`, использующей библиотеку `procfs` для чтения метрик процессов. Добавлены вспомогательные функции для чтения cgroup_path, systemd_unit, UID/GID и переменных окружения. Добавлены 6 unit-тестов, покрывающих парсинг cgroup, извлечение systemd unit, чтение переменных окружения и обработку ошибок.
- [x] ST-010-1: Планировщик изменений Actuator (nice/ionice без системных вызовов)
  - Тип: Rust / core / actuator
  - Примечания: добавлен планировщик `plan_priority_changes`, формирующий диффы по nice/ionice на основе PolicyResult; покрыт 3 юнит-тестами.
- [x] ST-005-2a: Парсер `pw-dump` → AudioClientInfo
  - Тип: Rust / core / metrics
  - Примечания: добавлен модуль `metrics::audio_pipewire` с парсером `parse_pw_dump_clients`, 3 юнит-теста.
- [x] ST-012: Построение фич для тренера (`build_feature_matrix`)
  - Тип: Python / trainer
  - Примечания: реализована трансформация с дефолтами и cat-индексами, добавлены тесты.
- [x] ST-013: Unit-тесты для train_ranker модуля
  - Тип: Python / trainer
  - Примечания: добавлены 4 unit-теста в `tests/test_train_ranker.py`, покрывающие основные сценарии использования `train_ranker`. Тесты проверяют сохранение моделей, обработку ошибок и корректность параметров обученной модели.
- [x] ST-014: Дефолты кат-фич и тегов в build_feature_matrix
  - Тип: Python / trainer / tests
  - Примечания: отсутствующие теги нормализуются в `unknown`, категориальные фичи получают консистентные дефолты.
- [x] ST-015: Доп. проверки build_feature_matrix (trainer)
  - Тип: Python / trainer / tests
  - Примечания: добавлены проверки на пустой DataFrame и порядок cat_feature_indices, все тесты проходят.
- [x] ST-016: Реализация главного цикла демона (run_daemon)
  - Тип: Rust / core / daemon
  - Примечания: реализован полный главный цикл демона с интеграцией всех компонентов. Используются статические бекенды для окон и аудио (реальные бекенды - отдельная задача). Функция collect_snapshot собирает метрики системы, процессов, окон, аудио и ввода, строит Snapshot. Главный цикл применяет группировку, классификацию, политику и actuator с поддержкой гистерезиса.
- [x] ST-017: Построение фич для ML-ранкера в Rust (`model::features`)
  - Тип: Rust / core / model
  - Примечания: реализована структура `FeatureVector` и функция `build_features()`, которая извлекает 33 числовые, 12 булевых и 6 категориальных фич из Snapshot и AppGroup. Поддерживаются дефолты для отсутствующих значений (0.0 для числовых, 0 для булевых, "unknown" для категориальных). Добавлены 3 unit-теста, покрывающие базовый сценарий, дефолты и корректность индексов категориальных фичей.

- [x] ST-018: Каркас ML-ранкера (трейт и заглушка)
  - Тип: Rust / core / model
  - Критерии готовности:
    - Трейт `Ranker` с методом `rank()` для ранжирования AppGroup по фичам;
    - Структура `RankingResult` с score, rank и percentile для каждого AppGroup;
    - Заглушка `StubRanker` для тестирования (возвращает фиксированные scores);
    - Unit-тесты на трейт и заглушку (минимум 2 теста).
  - Примечания: реализован трейт `Ranker` с методом `rank()`, структура `RankingResult` содержит score, rank и percentile. Добавлена заглушка `StubRanker`, которая использует простые эвристики (фокусная группа, GUI, CPU usage) для вычисления scores. Добавлены 2 unit-теста, проверяющие базовое ранжирование и случай с одной группой. Каркас готов для интеграции реальных ML-моделей (ONNX/JSON) в будущем.

- [x] ST-005-2b: PipeWireIntrospector через `pw-dump`
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - Структура `PipeWireIntrospector`, реализующая трейт `AudioIntrospector`;
    - Вызов `pw-dump` через команду и парсинг JSON;
    - Отслеживание XRUN через мониторинг ERR из `pw-dump`;
    - Unit-тесты на парсинг XRUN и создание интроспектора (4 теста).
  - Примечания: реализована структура `PipeWireIntrospector` с методами `audio_metrics()` и `clients()`, которые вызывают `pw-dump` и парсят результат. Добавлена функция `parse_pw_dump_xruns()` для извлечения ERR счётчиков из JSON. Интроспектор отслеживает изменения ERR между вызовами для определения новых XRUN событий. Добавлены 4 unit-теста, покрывающие парсинг XRUN, обработку пустых результатов и игнорирование не-узлов. Интроспектор готов для интеграции в главный цикл демона.

- [x] ST-005-2c: Интеграция PipeWireIntrospector в главный цикл демона
  - Тип: Rust / core / daemon
  - Критерии готовности:
    - Замена `StaticAudioIntrospector::empty()` на `PipeWireIntrospector` в `run_daemon`;
    - Fallback на `StaticAudioIntrospector`, если `pw-dump` недоступен;
    - Обновление комментариев и логирования.
  - Примечания: интегрирован `PipeWireIntrospector` в главный цикл демона (`run_daemon`). Добавлена проверка доступности `pw-dump` при инициализации с автоматическим fallback на `StaticAudioIntrospector`, если PipeWire недоступен. Все существующие тесты проходят (101 тест). Демон теперь использует реальный PipeWire интроспектор для сбора метрик аудио, когда это возможно.

- [x] ST-005-2d: Улучшение отслеживания XRUN (более точное определение новых XRUN, поддержка различных форматов ERR)
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - [x] Расширена поддержка форматов ERR (добавлены варианты: "error", "xrun", "node.error.count", "pipewire.error", "pipewire.xrun");
    - [x] Улучшена логика отслеживания: обработка уменьшения ERR (перезапуск узла), автоматическая очистка исчезнувших узлов;
    - [x] Улучшено вычисление unknown_xruns с использованием saturating_sub для безопасности;
    - [x] Добавлены unit-тесты для различных форматов ERR, уменьшения ERR и исчезновения узлов (5 новых тестов).
  - Примечания: расширена функция parse_err_count для поддержки 10 различных форматов ERR. Улучшена логика в audio_metrics() для корректной обработки случаев, когда ERR уменьшается (перезапуск узла) или узлы исчезают из вывода pw-dump. Добавлены 5 новых unit-тестов, покрывающих различные форматы ERR, строковые значения ERR, уменьшение ERR и исчезновение узлов. Все 106 тестов проекта проходят успешно.

- [x] ST-019: Интеграция ML-ранкера в Policy Engine (hybrid mode)
  - Тип: Rust / core / policy
  - Критерии готовности:
    - [x] Добавлено поле policy_mode в Config (rules-only/hybrid);
    - [x] PolicyEngine поддерживает опциональный Ranker;
    - [x] В hybrid mode используется percentile из ранкера для маппинга на классы приоритетов;
    - [x] Guardrails и семантические правила имеют приоритет над ранкером;
    - [x] Unit-тесты для hybrid mode (3 новых теста).
  - Примечания: реализована интеграция ML-ранкера в Policy Engine. Добавлено поле policy_mode в Config с поддержкой режимов rules-only (по умолчанию) и hybrid. В hybrid mode PolicyEngine использует StubRanker для ранжирования групп и маппит percentile на классы приоритетов через пороги из конфига. Guardrails и семантические правила имеют приоритет над ранкером. Добавлены 3 новых unit-теста, покрывающих использование ранкера, приоритет guardrails и маппинг percentile. Все 110 тестов проекта проходят успешно.

- [x] ST-020: Реализация вычисления bad_responsiveness и responsiveness_score
  - Тип: Rust / core / logging
  - Критерии готовности:
    - [x] Добавлен порог sched_latency_p99_threshold_ms в Config;
    - [x] Реализована функция ResponsivenessMetrics::compute() для вычисления bad_responsiveness и responsiveness_score;
    - [x] bad_responsiveness вычисляется на основе PSI CPU/IO, scheduling latency, XRUN и UI latency;
    - [x] responsiveness_score вычисляется как нормированная комбинация метрик (0.0 = плохо, 1.0 = хорошо);
    - [x] Интеграция в collect_snapshot();
    - [x] Unit-тесты для всех сценариев (8 тестов).
  - Примечания: реализовано вычисление метрик отзывчивости согласно документации tz.md. Добавлен порог sched_latency_p99_threshold_ms в Config с дефолтным значением 10.0 мс. Функция compute() проверяет PSI CPU/IO, scheduling latency, XRUN и UI latency для определения bad_responsiveness. responsiveness_score вычисляется как взвешенная комбинация нормализованных метрик. Добавлены 8 unit-тестов, покрывающих хорошие условия, высокие PSI CPU/IO, высокую scheduling latency, XRUN, множественные проблемы, отсутствие метрик и диапазон score. Все 118 тестов проекта проходят успешно.

- [x] ST-021: Добавление настраиваемого порога ui_loop_p95_threshold_ms
  - Тип: Rust / core / config / logging
  - Критерии готовности:
    - [x] Добавлено поле ui_loop_p95_threshold_ms в Config::Thresholds с дефолтным значением 16.67 мс;
    - [x] Порог используется в ResponsivenessMetrics::compute() вместо хардкода 16.67;
    - [x] Добавлена валидация порога в Thresholds::validate();
    - [x] Обновлены все места создания Thresholds в тестах;
    - [x] Unit-тесты для проверки использования порога (3 новых теста).
  - Примечания: добавлен настраиваемый порог ui_loop_p95_threshold_ms в Config::Thresholds с дефолтным значением 16.67 мс (60 FPS). Порог используется в двух местах в ResponsivenessMetrics::compute(): для определения bad_responsiveness и для нормализации в responsiveness_score. Добавлены 3 новых unit-теста, проверяющих обнаружение высокой UI latency, низкой UI latency и использование кастомного порога. Все 121 тест проекта проходят успешно.

- [x] ST-005-2: Реальный PipeWire/PulseAudio адаптер для AudioIntrospector
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - [x] Парсер `pw-dump` → AudioClientInfo;
    - [x] PipeWireIntrospector через `pw-dump` с отслеживанием XRUN через ERR;
    - [x] Интеграция PipeWireIntrospector в главный цикл демона;
    - [x] Улучшение отслеживания XRUN (поддержка различных форматов ERR, обработка уменьшения ERR, очистка исчезнувших узлов);
    - [x] Unit-тесты для всех компонентов (9 тестов).
  - Примечания: реализован PipeWireIntrospector, который использует `pw-dump` для получения метрик аудио. Поддерживается отслеживание XRUN через различные форматы ERR (10 вариантов). Интроспектор интегрирован в главный цикл демона с автоматическим fallback на StaticAudioIntrospector, если PipeWire недоступен. Добавлены 9 unit-тестов, покрывающих парсинг XRUN, различные форматы ERR, уменьшение ERR и исчезновение узлов. Все тесты проекта проходят успешно.

- [x] ST-022: Реализация export_model для экспорта обученных моделей в различные форматы
  - Тип: Python / trainer
  - Критерии готовности:
    - [x] Реализована функция export_model с поддержкой форматов json, onnx, cbm;
    - [x] Поддержка загрузки моделей из json и cbm;
    - [x] Обработка ошибок (неподдерживаемый формат, отсутствующий файл);
    - [x] Unit-тесты для всех сценариев (6 тестов).
  - Примечания: реализована функция export_model, которая загружает модель CatBoostRanker и экспортирует её в указанный формат. Поддерживаются форматы: onnx, json, cbm. Добавлены 6 unit-тестов, покрывающих экспорт между форматами, обработку ошибок и регистронезависимость формата. Все тесты проходят успешно.

- [x] ST-023: Улучшение поддержки glob паттернов в matches_pattern
  - Тип: Rust / core / classify
  - Критерии готовности:
    - [x] Поддержка `?` (один символ);
    - [x] Поддержка множественных `*` в одном паттерне (например, `firefox-*-bin`);
    - [x] Поддержка комбинаций `*` и `?` (например, `firefox-?-*`);
    - [x] Unit-тесты для всех новых случаев (расширено до 20+ тестов);
    - [x] Обратная совместимость с существующими паттернами.
  - Примечания: реализован полноценный glob matcher с рекурсивным алгоритмом сопоставления. Поддерживаются все комбинации `*` и `?`, включая множественные wildcard символы в одном паттерне. Добавлены расширенные unit-тесты, покрывающие базовые случаи, `?`, множественные `*`, комбинации, пустые строки и граничные случаи. Все 121 тест проекта проходят успешно. Удалён TODO про добавление полноценной поддержки glob/regex.

- [x] ST-024: Исправление предупреждения компилятора: удалить неиспользуемый импорт PathBuf
  - Тип: Rust / core / classify
  - Критерии готовности:
    - [x] Удалён неиспользуемый импорт PathBuf из основного кода;
    - [x] PathBuf импортирован только в блоке тестов, где он используется;
    - [x] Все тесты проходят без предупреждений компилятора.
  - Примечания: исправлено предупреждение компилятора о неиспользуемом импорте PathBuf. Импорт перенесён в блок тестов, где он действительно используется. Все 121 тест проходят успешно.

- [x] ST-025: Реализация X11Introspector для получения информации об окнах через EWMH (X11)
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - [x] Структура `X11Introspector`, реализующая трейт `WindowIntrospector`;
    - [x] Получение списка окон через EWMH (`_NET_CLIENT_LIST`);
    - [x] Получение информации об окне: title, app_id, workspace, state (focused/minimized/fullscreen);
    - [x] Получение PID через `_NET_WM_PID`;
    - [x] Определение фокусного окна через `_NET_ACTIVE_WINDOW`;
    - [x] Unit-тесты на парсинг окон и обработку ошибок (5 тестов);
    - [x] Fallback на StaticWindowIntrospector, если X11 недоступен.
  - Примечания: реализован X11Introspector с полной поддержкой EWMH. Добавлена зависимость x11rb в Cargo.toml. Интроспектор получает список окон, PID, состояние (focused/minimized/fullscreen), workspace, title и app_id через стандартные EWMH-атомы. Интегрирован в главный цикл демона с автоматическим fallback на StaticWindowIntrospector, если X-сервер недоступен. Добавлены 5 unit-тестов, покрывающих создание интроспектора, получение окон, фокусного окна и валидность структуры WindowInfo. Все 126 тестов проекта проходят успешно.

- [x] ST-026: Интеграция реального evdev для InputActivityTracker (чтение событий из /dev/input)
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - [x] Структура `EvdevInputTracker`, которая читает события из `/dev/input/*`;
    - [x] Автоматическое обнаружение доступных устройств ввода (клавиатура, мышь);
    - [x] Подписка на события через evdev-библиотеку;
    - [x] Интеграция с `InputActivityTracker` для обновления метрик;
    - [x] Unit-тесты на чтение событий и обработку ошибок (4 теста);
    - [x] Fallback на статический трекер, если evdev недоступен.
  - Примечания: реализован EvdevInputTracker, который автоматически обнаруживает доступные устройства ввода в `/dev/input/event*` и читает события в неблокирующем режиме. Создан enum InputTracker для абстракции между EvdevInputTracker и InputActivityTracker. Интегрирован в главный цикл демона с автоматическим fallback на простой трекер, если evdev устройства недоступны. Добавлены 4 unit-теста, покрывающих проверку доступности, создание трекера и получение метрик. Все 129 тестов проекта проходят успешно.

- [x] ST-027: Unit-тесты для tune_policy модуля
  - Тип: Python / trainer / tests
  - Критерии готовности:
    - [x] Создан тестовый файл test_tune_policy.py;
    - [x] Тесты проверяют сигнатуру функции;
    - [x] Тесты проверяют обработку NotImplementedError;
    - [x] Тесты проверяют обработку несуществующей и пустой БД;
    - [x] Все тесты проходят (4 теста).
  - Примечания: добавлены 4 unit-теста для модуля tune_policy. Тесты проверяют сигнатуру функции, обработку NotImplementedError (пока функция не реализована), обработку несуществующей и пустой БД. Добавлена зависимость pyyaml в pyproject.toml. Все тесты проходят успешно.

- [x] ST-029: Обновление PLAN.md и выбор следующей задачи
  - Тип: Документация / планирование
  - Критерии готовности:
    - [x] Перемещены выполненные задачи ST-028 и ST-010 в раздел "Готово";
    - [x] Обновлена структура PLAN.md для отражения текущего состояния проекта.
  - Примечания: выполнена реорганизация PLAN.md - перемещены выполненные задачи ST-028 (интеграционные тесты для run_daemon) и ST-010 (Actuator) из разделов "Ближайшие шаги" и "Бэклог" в раздел "Готово". Добавлена задача ST-011 (WaylandIntrospector) в бэклог. Все 132 теста проекта проходят успешно.

- [x] ST-028: Базовые интеграционные тесты для главного цикла демона (run_daemon)
  - Тип: Rust / core / integration tests
  - Критерии готовности:
    - [x] Создан файл интеграционных тестов для run_daemon (tests/run_daemon_test.rs);
    - [x] Тест проверяет инициализацию демона с минимальным конфигом;
    - [x] Тест проверяет один полный цикл сбора снапшота (с моками);
    - [x] Тест проверяет работу в dry-run режиме;
    - [x] Тест проверяет обработку несуществующей директории паттернов;
    - [x] Тест проверяет работу с snapshot logger;
    - [x] Добавлен механизм graceful shutdown через tokio::sync::watch::Receiver<bool>;
    - [x] Обновлён main.rs для обработки SIGINT/SIGTERM через shutdown канал;
    - [x] Добавлен bound Send + Sync к трейту Ranker для использования в async контексте;
    - [x] Исправлено зависание тестов: обернуты блокирующие операции в collect_snapshot через spawn_blocking.
  - Примечания: реализован механизм graceful shutdown через `watch::channel<bool>` в `run_daemon`. Добавлена обработка SIGINT/SIGTERM в main.rs. Обновлены все интеграционные тесты для использования shutdown канала. Исправлено зависание тестов: функция `collect_snapshot` сделана async, все блокирующие операции (чтение из /proc, вызовы X11/PipeWire/evdev) обернуты в `tokio::task::spawn_blocking`. Использованы `Arc` и `std::sync::Mutex` для безопасной передачи данных в блокирующий контекст. Все 5 интеграционных тестов проходят успешно без зависаний.

- [x] ST-010: Actuator: применение приоритетов через nice/ionice/cgroups
  - Тип: Rust / core / actuator
  - Критерии готовности:
    - [x] Применение nice через setpriority;
    - [x] Применение ionice через ioprio_set;
    - [x] Управление cgroups v2 (cpu.weight через прямое управление файловой системой);
    - [x] Гистерезис для предотвращения частых изменений;
    - [x] Unit-тесты на применение приоритетов (13 тестов, покрывают гистерезис, логику планирования и работу с cgroups).
  - Примечания: реализованы функции apply_nice() и apply_ionice() через libc, добавлен HysteresisTracker с настраиваемыми параметрами (min_time_between_changes, min_class_difference), функция apply_priority_adjustments() применяет изменения с учётом гистерезиса. Полностью реализовано управление cgroups v2 через функции read_process_cgroup(), get_or_create_app_cgroup(), set_cpu_weight(), move_process_to_cgroup() и apply_cgroup(). Добавлены 13 unit-тестов, покрывающих все аспекты работы Actuator.

- [x] ST-031: Добавление поддержки latency_nice в Actuator
  - Тип: Rust / core / actuator
  - Критерии готовности:
    - [x] Добавлен latency_nice в PriorityParams и маппинг для классов приоритетов;
    - [x] Реализована функция apply_latency_nice через sched_setattr;
    - [x] Интегрирован latency_nice в apply_priority_adjustments и plan_priority_changes;
    - [x] Добавлены unit-тесты для latency_nice (3 новых теста).
  - Примечания: реализована поддержка latency_nice для управления латентностью процессов. Добавлена структура LatencyNiceParams в PriorityParams с маппингом для каждого класса приоритета (CritInteractive: -15, Interactive: -10, Normal: 0, Background: 10, Idle: 15). Реализована функция apply_latency_nice() через системный вызов sched_setattr с флагом SCHED_FLAG_LATENCY_NICE. Функция корректно обрабатывает случаи, когда sched_setattr не поддерживается старыми ядрами (возвращает Ok без ошибки). Интегрирован latency_nice в PriorityAdjustment и функции планирования/применения приоритетов. Добавлены 3 новых unit-теста, покрывающих валидацию диапазона, обработку неподдерживаемых ядер и включение latency_nice в PriorityAdjustment. Все 135 тестов проекта проходят успешно.

- [x] ST-032: Выбрать и реализовать следующую маленькую задачу
  - Тип: Планирование / реализация
  - Критерии готовности:
    - [x] Выбрана конкретная маленькая задача из бэклога или создана новая;
    - [x] Задача реализована и покрыта тестами;
    - [x] Обновлён PLAN.md.
  - Примечания: выбрана задача ST-033 (чтение latency_nice из процесса).

- [x] ST-033: Реализация чтения текущего latency_nice из процесса через sched_getattr
  - Тип: Rust / core / actuator
  - Критерии готовности:
    - [x] Реализована функция read_latency_nice через sched_getattr;
    - [x] Вынесена структура SchedAttr на уровень модуля для переиспользования;
    - [x] Интегрировано чтение latency_nice в plan_priority_changes;
    - [x] Добавлены unit-тесты для чтения latency_nice (3 новых теста).
  - Примечания: реализована функция read_latency_nice(), которая использует системный вызов sched_getattr для чтения текущего значения latency_nice процесса. Структура SchedAttr вынесена на уровень модуля для переиспользования в apply_latency_nice() и read_latency_nice(). Функция корректно обрабатывает случаи, когда sched_getattr не поддерживается (ENOSYS), процесс не существует (ESRCH) или latency_nice не установлен (возвращает None). Интегрировано чтение latency_nice в plan_priority_changes() вместо хардкода None. Добавлены 3 новых unit-теста, покрывающих чтение latency_nice для текущего процесса, обработку несуществующего PID и чтение после установки. Все 138 тестов проекта проходят успешно.

- [x] ST-034: Выбрать и реализовать следующую маленькую задачу
  - Тип: Планирование / реализация
  - Критерии готовности:
    - [x] Выбрана конкретная маленькая задача из бэклога или создана новая;
    - [x] Задача реализована и покрыта тестами;
    - [x] Обновлён PLAN.md.
  - Примечания: выбрана задача ST-035 (чтение ionice из процесса).

- [x] ST-035: Реализация чтения текущего ionice из процесса через ioprio_get
  - Тип: Rust / core / actuator / metrics
  - Критерии готовности:
    - [x] Реализована функция read_ionice через ioprio_get;
    - [x] Интегрировано чтение ionice в collect_single_process для сбора метрик;
    - [x] Обновлена логика plan_priority_changes для использования прочитанного ionice;
    - [x] Добавлены unit-тесты для чтения ionice (4 новых теста).
  - Примечания: реализована функция read_ionice(), которая использует системный вызов ioprio_get для чтения текущего значения ionice процесса (класс и уровень). Функция корректно обрабатывает случаи, когда ioprio_get не поддерживается (ENOSYS), процесс не существует (ESRCH) или ionice не установлен (возвращает None). Интегрировано чтение ionice в collect_single_process() для заполнения полей ionice_class и ionice_prio в ProcessRecord. Обновлена логика plan_priority_changes() для использования прочитанного ionice, если он не был прочитан при сборе метрик. Добавлены 4 новых unit-теста, покрывающих чтение ionice для текущего процесса, обработку несуществующего PID, чтение после установки и включение ionice в PriorityAdjustment. Все 142 теста проекта проходят успешно.

- [x] ST-037: Реализация чтения текущего nice из процесса через getpriority
  - Тип: Rust / core / actuator
  - Критерии готовности:
    - [x] Реализована функция read_nice через getpriority;
    - [x] Интегрировано чтение nice в plan_priority_changes для консистентности с read_ionice() и read_latency_nice();
    - [x] Добавлены unit-тесты для чтения nice (4 новых теста).
  - Примечания: реализована функция read_nice(), которая использует системный вызов getpriority для чтения текущего значения nice процесса. Функция корректно обрабатывает случаи, когда getpriority не поддерживается (ENOSYS), процесс не существует (ESRCH) или произошла другая ошибка (возвращает None). Функция правильно обрабатывает случай, когда getpriority возвращает -1 (проверяет errno для различения ошибки и валидного значения nice = -1). Интегрировано чтение nice в plan_priority_changes() для консистентности с read_ionice() и read_latency_nice(), хотя nice уже читается из /proc/[pid]/stat при сборе метрик. Добавлены 4 новых unit-теста, покрывающих чтение nice для текущего процесса, обработку несуществующего PID, чтение после установки и включение nice в PriorityAdjustment. Все 146 тестов проекта проходят успешно.

- [x] ST-038: Выбрать и реализовать следующую маленькую задачу
  - Тип: Планирование / реализация
  - Критерии готовности:
    - [x] Выбрана конкретная маленькая задача из бэклога или создана новая;
    - [x] Задача реализована и покрыта тестами;
    - [x] Обновлён PLAN.md.
  - Примечания: выбрана задача ST-039 (базовая проверка доступности Wayland окружения).

- [x] ST-039: Добавление функции проверки доступности Wayland окружения
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - [x] Создан модуль `windows_wayland.rs` с базовой структурой `WaylandIntrospector`;
    - [x] Реализована функция `is_wayland_available()` для проверки доступности Wayland окружения;
    - [x] Функция проверяет переменные окружения `WAYLAND_DISPLAY`, `XDG_SESSION_TYPE` и наличие Wayland socket;
    - [x] Добавлена функция `WaylandIntrospector::is_available()` для консистентности с `X11Introspector`;
    - [x] Добавлены unit-тесты для всех компонентов (6 тестов).
  - Примечания: создан модуль `windows_wayland.rs` с базовой структурой для будущей реализации WaylandIntrospector. Реализована функция `is_wayland_available()`, которая проверяет доступность Wayland окружения через несколько признаков: переменная окружения `WAYLAND_DISPLAY`, `XDG_SESSION_TYPE=wayland`, наличие Wayland socket в `$XDG_RUNTIME_DIR` или `/run/user/<uid>/wayland-*`. Добавлена структура `WaylandIntrospector` с заглушками методов `new()` и `windows()`, которые пока возвращают ошибки (будут реализованы в задаче ST-011). Добавлены 6 unit-тестов, покрывающих проверку доступности, создание интроспектора и получение окон. Все 152 теста проекта проходят успешно. Это подготовка к будущей реализации полного WaylandIntrospector через wlr-foreign-toplevel-management.

- [x] ST-040: Выбрать и реализовать следующую маленькую задачу
  - Тип: Планирование / реализация
  - Критерии готовности:
    - [x] Выбрана конкретная маленькая задача из бэклога или создана новая;
    - [x] Задача реализована и покрыта тестами;
    - [x] Обновлён PLAN.md.
  - Примечания: выбрана задача ST-041 (добавление проверки Wayland в главный цикл демона).

- [x] ST-041: Добавление проверки Wayland в главный цикл демона для выбора window introspector
  - Тип: Rust / core / daemon
  - Критерии готовности:
    - [x] Обновлена логика выбора window_introspector в run_daemon для поддержки Wayland;
    - [x] Логика проверяет X11, затем Wayland, затем использует StaticWindowIntrospector как fallback;
    - [x] Все существующие тесты проходят (152 unit-теста, 5 интеграционных тестов).
  - Примечания: обновлена логика выбора window introspector в главном цикле демона (`run_daemon`). Теперь демон сначала проверяет доступность X11, затем Wayland, и только если оба недоступны, использует StaticWindowIntrospector. WaylandIntrospector пока не реализован полностью (это задача ST-011), но логика выбора корректно обрабатывает fallback на StaticWindowIntrospector, когда WaylandIntrospector::new() возвращает ошибку. Все 152 unit-теста и 5 интеграционных тестов проходят успешно. Это подготовка к будущей полной реализации WaylandIntrospector.

- [x] ST-043: Рефакторинг дублирующейся логики выбора window introspector в run_daemon
  - Тип: Rust / core / daemon / refactoring
  - Критерии готовности:
    - [x] Вынесена логика выбора window introspector в отдельную функцию `create_window_introspector()`;
    - [x] Устранено дублирование кода в `run_daemon`;
    - [x] Добавлены unit-тесты для новой функции (3 теста);
    - [x] Все существующие тесты проходят (155 unit-тестов).
  - Примечания: вынесена дублирующаяся логика выбора window introspector в отдельную функцию `create_window_introspector()`. Функция пытается создать интроспектор в порядке приоритета: X11 -> Wayland -> Static. Это улучшает читаемость и поддерживаемость кода. Добавлены 3 unit-теста, проверяющие, что функция всегда возвращает валидный интроспектор, корректно работает fallback на StaticWindowIntrospector и поддерживает метод `focused_window()`. Все 155 тестов проекта проходят успешно.

- [x] ST-046: Создать структуру LatencyCollector для хранения измерений scheduling latency и вычисления перцентилей
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - [x] Создан модуль `metrics::scheduling_latency` с структурой `LatencyCollector`;
    - [x] Поддержка скользящего окна измерений (max_samples);
    - [x] Методы для добавления измерений (`add_sample`) и вычисления перцентилей (`percentile`, `p95`, `p99`);
    - [x] Потокобезопасность для использования из probe-thread;
    - [x] Unit-тесты на все компоненты (12 тестов).
  - Примечания: реализована структура `LatencyCollector` с поддержкой скользящего окна измерений и вычисления перцентилей. Добавлены 12 unit-тестов, покрывающих создание коллектора, добавление измерений, вычисление перцентилей, потокобезопасность и точность вычислений. Все 167 unit-тестов проекта проходят успешно. Это подготовка к задаче ST-045 (реализация probe-thread).

- [x] ST-045: Реализация probe-thread для измерения scheduling latency (mini-cyclictest)
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - [x] Создан отдельный поток (probe-thread), который периодически спит и измеряет задержки пробуждения;
    - [x] Использование LatencyCollector из ST-046 для хранения измерений;
    - [x] Сбор статистики (P95, P99) за окно времени;
    - [x] Интеграция в collect_snapshot для заполнения sched_latency_p95_ms и sched_latency_p99_ms;
    - [x] Unit-тесты на измерение latency и интеграцию с collect_snapshot.
  - Примечания: реализована структура `LatencyProbe` с probe-thread, который спит на 5 мс и измеряет задержки пробуждения (wakeup_delay). Probe-thread работает в отдельном потоке и корректно останавливается при получении shutdown сигнала. Интегрирован в `run_daemon` и `collect_snapshot` для заполнения полей `sched_latency_p95_ms` и `sched_latency_p99_ms` в `ResponsivenessMetrics`. Добавлены 3 новых unit-теста для LatencyProbe, покрывающих запуск/остановку потока, сбор измерений и корректное завершение при drop. Все 170 unit-тестов и 5 интеграционных тестов проекта проходят успешно.

- [x] ST-047: Улучшение обработки ошибок при чтении PSI-файлов
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - [x] collect_system_metrics продолжает работу, если PSI-файлы недоступны (старые ядра);
    - [x] Возвращаются пустые метрики PSI вместо ошибки;
    - [x] Добавлено логирование предупреждений при недоступности PSI;
    - [x] Unit-тесты для случаев без PSI и с частичным PSI (2 новых теста).
  - Примечания: улучшена функция `collect_system_metrics` для graceful обработки отсутствия PSI-файлов. Если PSI недоступен (например, на старых ядрах без поддержки PSI), демон продолжает работу с пустыми метриками PSI вместо возврата ошибки. Добавлено логирование предупреждений через `tracing::warn` для каждого недоступного PSI-файла. Добавлены 2 новых unit-теста, покрывающих случай полного отсутствия PSI и частичного PSI (только CPU). Все 172 unit-теста и 5 интеграционных тестов проекта проходят успешно.

- [x] ST-011-1: Добавление зависимостей wayland-client и wayland-protocols-wlr для работы с wlr-foreign-toplevel-management
  - Тип: Rust / core / dependencies
  - Критерии готовности:
    - [x] Добавлены зависимости wayland-client (0.31), wayland-protocols (0.32) и wayland-protocols-wlr (0.3) в Cargo.toml;
    - [x] Проект компилируется без ошибок;
    - [x] Все существующие тесты проходят (6 тестов в windows_wayland модуле).
  - Примечания: добавлены зависимости для работы с Wayland композиторами через wlr-foreign-toplevel-management протокол. Использованы фичи `client` и `unstable` для поддержки клиентских протоколов. Это подготовка к полной реализации WaylandIntrospector в следующих подзадачах ST-011-2, ST-011-3, ST-011-4.

- [x] ST-011-4: Добавление unit-тестов для WaylandIntrospector
  - Тип: Rust / core / metrics / tests
  - Критерии готовности:
    - [x] Добавлены unit-тесты для проверки доступности Wayland;
    - [x] Добавлены unit-тесты для создания интроспектора;
    - [x] Добавлены unit-тесты для получения списка окон;
    - [x] Все тесты проходят (6 тестов в windows_wayland модуле).
  - Примечания: добавлены базовые unit-тесты для WaylandIntrospector. Тесты корректно обрабатывают случаи, когда Wayland недоступен или реализация не завершена. Все 172 unit-теста и 5 интеграционных тестов проекта проходят успешно. Базовая структура WaylandIntrospector создана с заглушками для будущей полной реализации.

- [x] ST-048: Улучшение сообщений об ошибках в WaylandIntrospector
  - Тип: Rust / core / metrics
  - Критерии готовности:
    - [x] Более информативные сообщения об ошибках с указанием конкретной причины;
    - [x] Разделение ошибок "Wayland недоступен" и "реализация не завершена";
    - [x] Улучшенная документация в комментариях;
    - [x] Unit-тесты проверяют корректность сообщений об ошибках (2 новых теста).
  - Примечания: улучшены сообщения об ошибках в WaylandIntrospector::new() и windows(). Добавлены подробные описания причин ошибок с инструкциями по проверке доступности Wayland. Улучшена документация методов. Добавлены 2 новых unit-теста, проверяющих информативность сообщений об ошибках. Все 7 тестов в модуле windows_wayland проходят успешно.

- [x] ST-049: Реализация функции чтения текущего cpu.weight из cgroup
  - Тип: Rust / core / actuator
  - Критерии готовности:
    - [x] Реализована функция read_cpu_weight() для чтения cpu.weight из cgroup процесса;
    - [x] Функция использует read_process_cgroup() для определения cgroup процесса;
    - [x] Функция читает cpu.weight из файла /sys/fs/cgroup/.../cpu.weight;
    - [x] Функция корректно обрабатывает случаи отсутствия cgroup или cpu.weight;
    - [x] Добавлены unit-тесты для всех сценариев (3 новых теста).
  - Примечания: реализована функция read_cpu_weight(), которая читает текущее значение cpu.weight из cgroup процесса. Функция использует read_process_cgroup() для определения cgroup процесса и читает значение из файла cpu.weight. Функция корректно обрабатывает случаи, когда процесс не существует, cgroup не найден или cpu.weight недоступен (возвращает None). Добавлены 3 новых unit-теста, покрывающих обработку несуществующего PID, чтение cpu.weight текущего процесса и работу функции в целом. Все 176 тестов проекта проходят успешно. Функция обеспечивает консистентность с read_nice(), read_ionice() и read_latency_nice() для чтения текущих значений приоритетов.

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.
