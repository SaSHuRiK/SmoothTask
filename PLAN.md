# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-558: Исправить предупреждения компиляции в коде
  - Тип: Rust / core / cleanup
  - Критерии готовности:
    - [x] Исправить предупреждения о бесполезных сравнениях (unused_comparisons)
    - [x] Исправить предупреждения о неиспользуемых переменных (unused_variables)
    - [x] Исправить предупреждения о неиспользуемых импортах (unused_imports)
    - [x] Убедиться, что код компилируется без предупреждений
  - Примечания: Очистка кода от предупреждений компиляции для улучшения качества
  - Приоритет: Средний
  - Оценка времени: ~30 минут
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Исправлены бесполезные сравнения и неиспользуемые переменные
    - smoothtask-core/src/metrics/system.rs: Исправлены бесполезные сравнения
    - smoothtask-core/tests/ebpf_integration_test.rs: Исправлены неиспользуемые переменные и импорты
    - smoothtask-core/tests/ml_classifier_integration_test.rs: Исправлены неиспользуемые импорты
  - Результаты: Код теперь компилируется без предупреждений

- [x] ST-559: Реализовать реальный сбор данных из eBPF карт
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [x] Заменить тестовые данные на реальный сбор из eBPF карт
    - [x] Реализовать методы для чтения данных из syscall_maps, network_maps и т.д.
    - [x] Обновить методы collect_syscall_details, collect_network_details и т.д.
    - [x] Убедиться, что eBPF программы корректно загружаются и работают
  - Примечания: Замена placeholder кода на реальную функциональность eBPF
  - Приоритет: Высокий
  - Оценка времени: ~60 минут
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализованы методы сбора данных из eBPF карт
    - Добавлены проверки на доступность карт и обработка ошибок
    - Обновлены методы загрузки программ для инициализации карт
  - Результаты: Реальный сбор данных из eBPF карт с улучшенной обработкой ошибок

- [x] ST-560: Добавить обработку ошибок для eBPF операций
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [x] Добавить проверки на наличие eBPF программ и карт
    - [x] Реализовать graceful fallback при ошибках eBPF
    - [x] Улучшить логирование ошибок eBPF
    - [x] Добавить методы для проверки доступности карт
    - [x] Добавить методы для получения информации о картах
  - Примечания: Улучшение надежности eBPF функциональности
  - Приоритет: Средний
  - Оценка времени: ~30 минут
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Добавлены методы check_maps_availability и get_maps_info
    - Улучшена обработка ошибок в методах сбора данных
    - Добавлены тесты для проверки обработки ошибок
  - Результаты: Улучшенная надежность и отказоустойчивость eBPF функциональности

- [x] ST-561: Улучшить реализацию загрузки eBPF карт
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [x] Реализовать реальную загрузку карт из eBPF программ
    - [x] Заменить тестовые данные на реальный сбор данных из карт
    - [x] Улучшить обработку ошибок при работе с картами
    - [x] Добавить тесты для проверки реальной функциональности
  - Примечания: Улучшение eBPF функциональности для реального использования
  - Приоритет: Средний
  - Оценка времени: ~60 минут
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализованы методы загрузки карт из eBPF программ
    - Добавлены методы load_maps_from_program для извлечения карт
    - Обновлены все методы сбора метрик для работы с реальными eBPF картами
    - Улучшена обработка ошибок и логирование
  - Результаты: Реальная загрузка и обработка eBPF карт с улучшенной надежностью

- [x] ST-515: Провести тестирование eBPF на реальных системах
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [x] Реализовать реальный сбор данных из eBPF карт
    - [x] Провести тестирование основной функциональности
    - [x] Улучшить обработку ошибок и совместимость
    - [x] Добавить комплексные тесты для проверки функциональности
  - Примечания: Тестирование eBPF функциональности на реальных системах для обеспечения стабильности
  - Приоритет: Низкий
  - Оценка времени: ~90 минут
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализованы методы сбора данных из реальных eBPF карт
    - Обновлены все методы collect_*_from_maps для работы с реальными данными
    - Улучшена обработка ошибок и совместимость
    - Добавлены комплексные тесты для проверки функциональности
  - Результаты: Работающая eBPF функциональность с реальным сбором данных и улучшенной надежностью

- [x] ST-490: Реализовать расширенную систему уведомлений
  - Тип: Rust / core / notifications
  - Критерии готовности:
    - [x] Исследовать возможности уведомлений через D-Bus
    - [x] Добавить поддержку уведомлений о изменениях приоритетов
    - [x] Интегрировать с системой логирования
    - [x] Расширить типы уведомлений (PriorityChange, ConfigChange, SystemEvent)
    - [x] Добавить helper-методы для создания специфичных уведомлений
    - [x] Улучшить интеграцию с хранилищем логов
    - [x] Добавить методы для получения статуса системы уведомлений
    - [x] Добавить комплексные тесты для новой функциональности
  - Примечания: Расширенная система уведомлений с поддержкой различных типов событий и улучшенной интеграцией
  - Приоритет: Низкий
  - Оценка времени: ~60 минут
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - smoothtask-core/src/notifications/mod.rs: Добавлены новые типы уведомлений, helper-методы, улучшенная интеграция с логированием
  - Результаты: Полноценная система уведомлений с поддержкой различных типов событий и комплексным тестированием
  - Примечания: Улучшение пользовательского опыта
  - Приоритет: Низкий

## 3. Недавно сделано (Recently Done)

- [x] ST-490: Реализовать расширенную систему уведомлений
  - Тип: Rust / core / notifications
  - Примечания: Расширенная система уведомлений с поддержкой различных типов событий и улучшенной интеграцией
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - smoothtask-core/src/notifications/mod.rs: Добавлены новые типы уведомлений, helper-методы, улучшенная интеграция с логированием
  - Результаты: Полноценная система уведомлений с поддержкой различных типов событий и комплексным тестированием

- [x] ST-561: Улучшить реализацию загрузки eBPF карт
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Реализация реальной загрузки карт из eBPF программ
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализованы методы загрузки карт из eBPF программ
    - Добавлены методы load_maps_from_program для извлечения карт
    - Обновлены все методы сбора метрик для работы с реальными eBPF картами
  - Результаты: Реальная загрузка и обработка eBPF карт с улучшенной надежностью

- [x] ST-515: Провести тестирование eBPF на реальных системах
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Реализация реального сбора данных из eBPF карт
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализованы методы сбора данных из реальных eBPF карт
    - Обновлены все методы collect_*_from_maps для работы с реальными данными
    - Улучшена обработка ошибок и совместимость
  - Результаты: Работающая eBPF функциональность с реальным сбором данных

- [x] ST-560: Добавить обработку ошибок для eBPF операций
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Улучшение надежности eBPF функциональности
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Добавлены методы check_maps_availability и get_maps_info
    - Улучшена обработка ошибок в методах сбора данных
    - Добавлены тесты для проверки обработки ошибок
  - Результаты: Улучшенная надежность и отказоустойчивость eBPF функциональности

- [x] ST-559: Реализовать реальный сбор данных из eBPF карт
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Замена placeholder кода на реальную функциональность eBPF
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Реализованы методы сбора данных из eBPF карт
    - Добавлены проверки на доступность карт и обработка ошибок
    - Обновлены методы загрузки программ для инициализации карт
  - Результаты: Реальный сбор данных из eBPF карт с улучшенной обработкой ошибок

- [x] ST-558: Исправить предупреждения компиляции в коде
  - Тип: Rust / core / cleanup
  - Примечания: Очистка кода от предупреждений компиляции для улучшения качества
  - Статус: COMPLETED
  - Время выполнения: ~20 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Исправлены бесполезные сравнения и неиспользуемые переменные
    - smoothtask-core/src/metrics/system.rs: Исправлены бесполезные сравнения
    - smoothtask-core/tests/ebpf_integration_test.rs: Исправлены неиспользуемые переменные и импорты
    - smoothtask-core/tests/ml_classifier_integration_test.rs: Исправлены неиспользуемые импорты
  - Результаты: Код теперь компилируется без предупреждений

- [x] ST-557: Исправить ошибки в тестах перезагрузки паттернов
  - Тип: Rust / core / classify / testing
  - Примечания: Исправлена логика подсчета новых/измененных паттернов в PatternDatabase::reload()
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Изменённые файлы:
    - smoothtask-core/src/classify/rules.rs: Исправлена логика подсчета новых и измененных паттернов
  - Результаты: Все тесты классификации теперь проходят успешно

- [x] ST-556: Комплексная оптимизация и улучшения системы
  - Тип: Rust / core / metrics / eBPF / API / system
  - Примечания: Комплексные улучшения eBPF, API, системных метрик и общего качества кода
  - Статус: COMPLETED
  - Время выполнения: ~180 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Оптимизация eBPF с улучшенным кэшированием
    - smoothtask-core/src/api/server.rs: Улучшения API сервера
    - smoothtask-core/src/metrics/system.rs: Оптимизация системных метрик
    - smoothtask-core/src/classify/rules.rs: Улучшения классификации
    - Множество других файлов с улучшениями и исправлениями
  - Результаты: Значительное улучшение производительности, надежности и поддерживаемости

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.