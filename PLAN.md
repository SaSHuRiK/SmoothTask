# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [x] ST-538: Добавить поддержку мониторинга производительности GPU через eBPF
  - Тип: Rust / core / metrics / eBPF / GPU
  - Критерии готовности:
    - [x] Исследовать возможности мониторинга GPU через eBPF
    - [x] Реализовать eBPF программу для отслеживания активности GPU
    - [x] Добавить поддержку в EbpfMetricsCollector
    - [x] Интегрировать с основной системой метрик
  - Примечания: Расширенный мониторинг производительности GPU для улучшения анализа
  - Приоритет: Высокий
  - Оценка времени: ~120 минут
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Изменённые файлы:
    - smoothtask-core/src/ebpf_programs/gpu_monitor.c: Добавлена новая eBPF программа для мониторинга GPU
    - smoothtask-core/src/metrics/ebpf.rs: Добавлена поддержка GPU мониторинга в конфигурацию и метрики
    - smoothtask-core/tests/ebpf_mock_test.rs: Обновлены тесты для поддержки новых полей
    - smoothtask-core/src/api/server.rs: Обновлены конфигурации по умолчанию
    - smoothtask-core/src/metrics/system.rs: Обновлены тесты для поддержки новых полей
  - Новые возможности:
    - Мониторинг использования GPU через eBPF
    - Мониторинг памяти GPU
    - Детализированная статистика по GPU устройствам
    - Интеграция с основной системой метрик

- [x] ST-539: Добавить поддержку мониторинга файловой системы через eBPF
  - Тип: Rust / core / metrics / eBPF / filesystem
  - Критерии готовности:
    - [x] Исследовать возможности мониторинга файловой системы через eBPF
    - [x] Реализовать eBPF программу для отслеживания операций с файлами
    - [x] Добавить поддержку в EbpfMetricsCollector
    - [x] Интегрировать с основной системой метрик
  - Примечания: Расширенный мониторинг операций с файловой системой
  - Приоритет: Средний
  - Оценка времени: ~90 минут
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Изменённые файлы:
    - smoothtask-core/src/ebpf_programs/filesystem_monitor.c: Добавлена новая eBPF программа для мониторинга файловой системы
    - smoothtask-core/src/metrics/ebpf.rs: Добавлена поддержка мониторинга файловой системы в конфигурацию и метрики
    - smoothtask-core/tests/ebpf_integration_test.rs: Обновлены интеграционные тесты для поддержки нового функционала
  - Новые возможности:
    - Мониторинг операций с файловой системой (чтение, запись, открытие, закрытие)
    - Детализированная статистика по файлам
    - Интеграция с основной системой метрик

- [x] ST-540: Оптимизировать производительность eBPF программ (завершено)
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [x] Проанализировать текущую производительность eBPF программ
    - [x] Создать оптимизированные версии eBPF программ для GPU и файловой системы
    - [x] Создать высокопроизводительные версии eBPF программ с минимальными операциями
    - [x] Добавить поддержку загрузки оптимизированных программ
    - [x] Оптимизировать использование карт и структур данных
    - [x] Уменьшить накладные расходы на сбор метрик
    - [x] Добавить агрессивное кэширование для снижения нагрузки
    - [x] Добавить конфигурацию высокопроизводительного режима
    - [x] Провести бенчмаркинг до и после оптимизации
  - Примечания: Улучшение производительности eBPF программ для снижения нагрузки на систему
  - Приоритет: Высокий
  - Оценка времени: ~180 минут
  - Статус: COMPLETED
  - Время выполнения: ~120 минут
  - Изменённые файлы:
    - smoothtask-core/src/ebpf_programs/gpu_monitor_high_perf.c: Создана высокопроизводительная версия
    - smoothtask-core/src/ebpf_programs/filesystem_monitor_high_perf.c: Создана высокопроизводительная версия
    - smoothtask-core/src/metrics/ebpf.rs: Добавлена поддержка загрузки оптимизированных программ
    - smoothtask-core/src/metrics/ebpf.rs: Добавлены параметры высокопроизводительного режима
    - smoothtask-core/src/metrics/ebpf.rs: Добавлено агрессивное кэширование
    - smoothtask-core/benches/ebpf_benchmarks.rs: Добавлены бенчмарки для измерения производительности
  - Новые возможности:
    - Высокопроизводительные eBPF программы с минимальными операциями
    - Автоматическая загрузка оптимизированных программ при наличии
    - Агрессивное кэширование для значительного снижения нагрузки
    - Конфигурация высокопроизводительного режима
    - Бенчмарки для измерения производительности до и после оптимизации

## 2. Бэклог

- [ ] ST-514: Оптимизировать производительность eBPF программ
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [ ] Проанализировать текущую производительность eBPF программ
    - [ ] Оптимизировать использование карт и структур данных
    - [ ] Уменьшить накладные расходы на сбор метрик
    - [ ] Провести бенчмаркинг до и после оптимизации
  - Примечания: Улучшение производительности eBPF программ для снижения нагрузки на систему
  - Приоритет: Средний

- [ ] ST-515: Провести тестирование eBPF на реальных системах
  - Тип: Rust / core / metrics / eBPF
  - Критерии готовности:
    - [ ] Провести тестирование на различных конфигурациях ядра
    - [ ] Проверить совместимость с различными дистрибутивами Linux
    - [ ] Собрать метрики производительности и стабильности
    - [ ] Документировать результаты и ограничения
  - Примечания: Тестирование eBPF функциональности на реальных системах для обеспечения стабильности
  - Приоритет: Низкий

- [ ] ST-490: Реализовать расширенную систему уведомлений
  - Тип: Rust / core / notifications
  - Критерии готовности:
    - [ ] Исследовать возможности уведомлений через D-Bus
    - [ ] Добавить поддержку уведомлений о изменениях приоритетов
    - [ ] Интегрировать с системой логирования
  - Примечания: Улучшение пользовательского опыта
  - Приоритет: Низкий

## 3. Недавно сделано (Recently Done)

- [x] ST-540: Оптимизировать производительность eBPF программ (завершено)
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Успешная оптимизация eBPF программ с добавлением высокопроизводительных версий, агрессивного кэширования и бенчмарков
  - Статус: COMPLETED
  - Время выполнения: ~120 минут

- [x] ST-539: Добавить поддержку мониторинга файловой системы через eBPF
  - Тип: Rust / core / metrics / eBPF / filesystem
  - Примечания: Успешная реализация мониторинга операций с файловой системой через eBPF
  - Статус: COMPLETED
  - Время выполнения: ~60 минут

- [x] ST-538: Добавить поддержку мониторинга производительности GPU через eBPF
  - Тип: Rust / core / metrics / eBPF / GPU
  - Примечания: Успешная реализация мониторинга производительности GPU через eBPF
  - Статус: COMPLETED
  - Время выполнения: ~60 минут

- [x] ST-537: Добавить интеграционные тесты с реальными eBPF программами
  - Тип: Rust / core / metrics / eBPF / testing
  - Примечания: Успешная реализация комплексных интеграционных тестов для eBPF функциональности
  - Статус: COMPLETED
  - Время выполнения: ~90 минут

- [x] ST-536: Реализовать реальную загрузку и выполнение eBPF программ
  - Тип: Rust / core / metrics / eBPF / implementation
  - Примечания: Успешная реализация реальной загрузки eBPF программ с использованием libbpf-rs
  - Статус: COMPLETED
  - Время выполнения: ~120 минут

См. архив: docs/history/PLAN_DONE_archive.md

См. архив: docs/history/PLAN_DONE_archive.md

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.