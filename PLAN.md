# SmoothTask — план задач

## Легенда статусов

- [ ] TODO       — задача ещё не делалась
- [~] IN PROGRESS — начата, но не завершена
- [x] DONE       — реализовано и покрыто тестами
- [!] BLOCKED    — есть блокер, нужна дополнительная информация

---

## 1. Ближайшие шаги (Next Up)

- [ ] ST-581: Добавить поддержку мониторинга GPU через eBPF
  - Тип: Rust / core / metrics / eBPF / GPU
  - Примечания: Расширение eBPF функциональности для мониторинга GPU метрик
  - Приоритет: Высокий
  - Оценка времени: ~90 минут
  - Зависимости: Текущая реализация eBPF модуля

- [ ] ST-582: Интегрировать eBPF метрики с системой уведомлений
  - Тип: Rust / core / notifications / eBPF
  - Примечания: Добавление уведомлений на основе eBPF метрик и событий
  - Приоритет: Средний
  - Оценка времени: ~60 минут
  - Зависимости: ST-581 (GPU мониторинг)

## 2. Бэклог

- [ ] ST-583: Добавить поддержку мониторинга температуры и энергопотребления через eBPF
  - Тип: Rust / core / metrics / eBPF / Hardware
  - Примечания: Расширение eBPF функциональности для мониторинга температуры CPU/GPU и энергопотребления
  - Приоритет: Средний
  - Оценка времени: ~60 минут
  - Зависимости: Текущая реализация eBPF модуля

- [ ] ST-584: Реализовать расширенную фильтрацию и агрегацию eBPF данных
  - Тип: Rust / core / metrics / eBPF / Processing
  - Примечания: Добавление возможностей фильтрации и агрегации eBPF данных на уровне ядра
  - Приоритет: Средний
  - Оценка времени: ~90 минут
  - Зависимости: ST-581 (GPU мониторинг)

- [ ] ST-585: Оптимизировать использование памяти в eBPF картах
  - Тип: Rust / core / metrics / eBPF / Performance
  - Примечания: Улучшение управления памятью в eBPF картах для уменьшения memory footprint
  - Приоритет: Низкий
  - Оценка времени: ~45 минут
  - Зависимости: Текущая реализация eBPF модуля

## 3. Недавно сделано (Recently Done)

- [x] ST-578: Оптимизировать загрузку eBPF программ для уменьшения времени инициализации
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Улучшение производительности загрузки eBPF программ
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~60 минут
  - Изменённые файлы:
    - smoothtask-core/src/metrics/ebpf.rs: Добавлены новые функции и структуры для оптимизации
  - Новые функции:
    - load_ebpf_program_from_file_with_timeout: Загрузка с таймаутом
    - load_ebpf_programs_parallel: Параллельная загрузка нескольких программ
    - EbpfProgramCache: Кэш загруженных программ
    - initialize_optimized: Оптимизированная инициализация
    - save_program_and_load_maps: Сохранение программ и загрузка карт
    - get_program_cache_stats: Статистика кэша программ
    - clear_program_cache: Очистка кэша программ
  - Результаты: Значительное улучшение производительности загрузки eBPF программ, поддержка параллельной загрузки, кэширование и мониторинг производительности

- [x] ST-577: Добавить примеры использования eBPF в примерах кода
  - Тип: Documentation / Examples
  - Примечания: Демонстрация различных сценариев использования eBPF функциональности
  - Приоритет: Средний
  - Статус: COMPLETED
  - Время выполнения: ~30 минут
  - Изменённые файлы:
    - smoothtask-core/examples/ebpf_example.rs: Базовый пример использования eBPF
    - smoothtask-core/examples/ebpf_advanced_example.rs: Продвинутый пример с многопоточностью
    - smoothtask-core/examples/README.md: Документация примеров
  - Результаты: Два полноценных примера с разными сценариями использования eBPF функциональности

- [x] ST-576: Улучшить документацию API для eBPF модуля
  - Тип: Documentation / API
  - Примечания: Создание подробной документации для интеграции eBPF в другие модули
  - Приоритет: Высокий
  - Статус: COMPLETED
  - Время выполнения: ~45 минут
  - Изменённые файлы:
    - docs/EBPF_API_DOCUMENTATION.md: Создан новый документ с полной документацией API
  - Результаты: Полная документация всех публичных интерфейсов, структур и примеров использования eBPF модуля

- [x] ST-575: Добавить поддержку дополнительных eBPF метрик (сетевые соединения, процесс-специфичные метрики)
  - Тип: Rust / core / metrics / eBPF
  - Примечания: Расширение функциональности eBPF для более детального мониторинга
  - Статус: COMPLETED
  - Время выполнения: ~90 минут
  - Изменённые файлы:
    - smoothtask-core/src/ebpf_programs/network_connections.c: Создана новая eBPF программа для мониторинга сетевых соединений
    - smoothtask-core/src/ebpf_programs/process_monitor.c: Создана новая eBPF программа для мониторинга процесс-специфичных метрик
    - smoothtask-core/src/metrics/ebpf.rs: Добавлены новые структуры ConnectionStat и ProcessStat, обновлена конфигурация EbpfConfig, добавлены новые поля в EbpfMetrics, реализованы методы загрузки и сбора новых метрик
  - Результаты: Добавлена поддержка мониторинга сетевых соединений и процесс-специфичных метрик через eBPF, расширена функциональность существующего eBPF модуля, добавлены соответствующие тесты

См. архив: docs/history/PLAN_DONE_archive.md

## 4. Блокеры

- [!] ST-099: Вернуть зависимость onnxruntime, когда появится стабильная версия с нужными фичами
  - Нужны: релиз onnxruntime с требуемыми возможностями.